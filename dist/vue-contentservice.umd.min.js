(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["vue-contentservice"]=t():e["vue-contentservice"]=t()})("undefined"!==typeof self?self:this,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"001a":function(e,t,n){"use strict";(function(e){n("ab1a"),n("6619"),n("d036"),n("8bbf");var o=n("d116"),s=0;t["a"]={name:"content-layout-editor",props:{context:{type:Object,required:!1},rightPane:{required:!1,type:Number},leftPane:{required:!1,type:Number},anchor:{type:String,required:!1},contentId:{type:String,required:!1},layout:{type:Object,required:!1},anchorPrefix:{type:String,required:!1},anchorSuffix:{type:String,required:!1}},data:function(){return{myLeftPaneSize:20,myRightPaneSize:20,gutterSize:3,haveLayout:!1,sane:!0}},mixins:[o["a"]],watch:{anchor:function(e,t){this.$content.setContent({vm:this,type:"crowdhound",contentId:e})},contentId:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){this.$content.setContent({vm:this,type:"crowdhound",contentId:contentId})})},computed:{crowdhoundAnchor:function(){return this.contentId?this.contentId:this.anchor?this.anchor:null},mycontext:function(){return this.context?this.context:{}},layoutAsJson:function(){return e.browser?(console.log("^^^ 1",this.$content.store),console.log("^^^ 2",this.$content.store.state),console.log("^^^ 3",this.$content.store.state.layoutAsJson),this.$content.util.safeJson(this.$content.store.state.layout)):"-server side-"},propertyElementAsJson:function(){return e.browser?this.$content.util.safeJson(this.$content.store.getters.propertyElement):"-server side-"},hasLeftSlot:function(){return!!this.$slots["left-pane"]},hasRightSlot:function(){return!!this.$slots["right-pane"]},splitStyle:function(){return this.isEditing?"":"100%"},rightPaneStyle:function(){return this.isEditing?"":"height: 0px;"},propertiesSplitStyle:function(){return this.isEditing?"width: 100%;":"width: 100%; height: 0px; position: absolute;"},leftSize:function(){return this.hasLeftSlot?this.myLeftPaneSize<0?5:this.myLeftPaneSize>100?100:this.myLeftPaneSize:0},middleSize:function(){var e=100-(this.leftSize+this.rightSize);return e<0&&(e=0),e},rightSize:function(){return"view"===this.pageEditMode||"live"===this.pageEditMode?0:this.myRightPaneSize<0?5:this.myRightPaneSize+this.myLeftSize>100?100-this.leftSize:this.myRightPaneSize},keymap:function(){return{"ctrl+alt+esc":{keydown:this.toggleEditing}}},thePropertyElement:function(){return e.browser?this.$content.store.state?this.$content.store.getters.propertyElement:(console.error("ContentLayoutEditor: this.$content.store.state is not defined"),null):null}},methods:{toggleEditing:function(e){if(e.timeStamp===s)return!0;s=e.timeStamp,this.$content.toggleEditMode()},switchMode:function(e){if(!e){var t=this.$content.store.state.mode;switch(t){case"edit":e="debug";break;case"layout":e="debug";break;case"debug":e="edit";break}}this.$content.setEditMode({mode:e,previousEditMode:e})},onDragEnd:function(e){console.log("Drag End",e),this.hasLeftSlot?(this.myLeftPaneSize=e[0]>70?70:e[0],this.rightSize>0&&(console.log("Setting right pane size to ",e[2]),this.myRightPaneSize=e[2]<10?10:e[2])):this.rightSize>0&&(console.log("Setting right pane size to ",e[1]),this.myRightPaneSize=e[1]<10?10:e[1])},dump:function(){console.log("dump")}},created:function(){if(console.log("ContentLayoutEditor.created(): this.$content.store=",this.$content.store),!this.$content)return console.error("ContentLayoutEditor.created(): this.$content not defined: has ContentService been initialised?"),void(this.sane=!1);this.rightPane&&(this.myShowRightPage=!0),this.rightPaneSize&&(this.myRightPaneSize=this.rightPaneSize),this.leftPaneSize&&(this.myLeftPaneSize=this.leftPaneSize);console.log("------------------------------"),console.log("contentId=",this.crowdhoundAnchor),console.log("layout=",this.layout),this.contentId?(this.$content.setContent({vm:this,type:"crowdhound",contentId:this.contentId}),this.haveLayout=!0):this.anchor?(console.error("ContentLayoutEditor: prop 'anchor' is deprecated. Please use 'contentId' instead."),this.$content.setContent({vm:this,type:"crowdhound",contentId:this.anchor}),this.haveLayout=!0):this.layout?(this.$content.setContent({vm:this,type:"fixed",layout:this.layout}),this.haveLayout=!0):console.error("content-layout-editor must be provided prop 'layout' or prop 'contentId'")}}}).call(this,n("4362"))},"00dd":function(e,t){e.exports=require("core-js/modules/es6.regexp.replace")},"026c":function(e,t,n){"use strict";var o=n("d965"),s=n.n(o);s.a},"0407":function(e,t,n){"use strict";var o=n("38c8"),s=n.n(o);s.a},"06c6":function(e,t,n){},"073f":function(e,t,n){},"0782":function(e,t,n){},"07a2":function(e,t){e.exports=require("@fortawesome/vue-fontawesome")},"07af":function(e,t,n){"use strict";var o=n("7612"),s=n.n(o);s.a},"0b8c":function(e,t,n){},"0be4":function(e,t,n){},"0ca7":function(e,t){e.exports=require("core-js/modules/es6.string.includes")},"0ee6":function(e,t){e.exports=require("froala-editor/css/froala_style.min.css")},1145:function(e,t,n){"use strict";var o=n("7ea8"),s=n.n(o);s.a},1409:function(e,t,n){"use strict";var o=n("4e7c"),s=n.n(o);s.a},"180b":function(e,t,n){"use strict";var o=n("789a"),s=n.n(o);s.a},1918:function(e,t){e.exports=require("vue-split-panel")},"1da5":function(e,t,n){"use strict";var o=n("6c3b"),s=n.n(o);s.a},"1ea8":function(e,t){e.exports=require("v-hotkey")},2153:function(e,t,n){"use strict";var o=n("f02f"),s=n.n(o);s.a},"232b":function(e,t){e.exports=require("vue-froala-wysiwyg")},2442:function(e,t,n){"use strict";var o=n("073f"),s=n.n(o);s.a},"25ac":function(e,t){e.exports=require("froala-editor/js/froala_editor.pkgd.min.js")},"25fc":function(e,t){e.exports=require("core-js/modules/es6.function.name")},"262e":function(e,t){e.exports=function(e,t,n,o){t&&console.log("".concat(t)),n&&console.log("params=",n),o.message?(console.error("Error: ".concat(o.message)),o.stack&&console.log(o.stack)):o.response?(console.log("Status: ".concat(o.response.status," ").concat(o.response.statusText)),o.response.data&&(o.response.data.Error&&console.log("Error: ".concat(o.response.data.Error)),o.response.data.Code&&console.log("Code: ".concat(o.response.data.code)),o.response.data.Message&&console.log("Message: ".concat(o.response.data.message)),console.log("response.data: ",o.response.data))):(console.error("Could not contact server."),console.log("Error:",o),t="Could not communicate with server"),e&&e.$toast?e.$toast.open({message:"".concat(t),type:"is-danger"}):alert(t)}},"268f":function(e,t,n){e.exports=n("67a2")},"2a3b":function(e,t){e.exports=require("core-js/library/fn/is-iterable")},"2a8c":function(e,t){e.exports=require("vue-drag-drop")},"2ba8":function(e,t,n){},"2dcf":function(e,t){e.exports=require("query-string")},"2f7f":function(e,t,n){},"33a4":function(e,t,n){"use strict";var o=n("3dd6"),s=n.n(o);s.a},"368f":function(e,t){e.exports=require("@fortawesome/free-solid-svg-icons")},"379a":function(e,t,n){},3801:function(e,t,n){"use strict";var o=n("40e1"),s=n.n(o);s.a},"38c8":function(e,t,n){},"3dd6":function(e,t,n){},"3e94":function(e,t,n){},"3fdb":function(e,t,n){"use strict";var o=n("3e94"),s=n.n(o);s.a},"40e1":function(e,t,n){},4362:function(e,t,n){t.nextTick=function(e){setTimeout(e,0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,o="/";t.cwd=function(){return o},t.chdir=function(t){e||(e=n("df7c")),o=e.resolve(t,o)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"445a":function(e,t,n){},"44d6":function(e,t){e.exports=require("core-js/modules/es7.array.includes")},4764:function(e,t){e.exports=require("core-js/library/fn/array/is-array")},"47c4":function(e,t,n){"use strict";var o=n("6f18"),s=n.n(o);s.a},"4d40":function(e,t){e.exports=require("core-js/library/fn/object/define-property")},"4da6":function(e,t){e.exports=function(e,t,n,o){console.log("API ERROR"),console.log("---------v");var s="Error calling server";console.error("Error calling API server:"),console.log("".concat(t)),n&&console.log(n),o.response?(console.log("Status: ".concat(o.response.status," ").concat(o.response.statusText)),o.response.data&&(o.response.data.Error&&console.log("Error: ".concat(o.response.data.Error)),o.response.data.Code&&console.log("Code: ".concat(o.response.data.code)),o.response.data.Message&&(console.log("Message: ".concat(o.response.data.message)),s=o.response.data.message),console.log("response.data: ",o.response.data))):(console.error("Could not contact server."),console.log("Error:",o),s="Could not communicate with server"),e&&e.$toast?e.$toast.open({message:"".concat(s),type:"is-danger"}):alert(s)}},"4e7c":function(e,t,n){},"506b":function(e,t,n){"use strict";var o=n("2ba8"),s=n.n(o);s.a},5880:function(e,t){e.exports=require("vuex")},"5a1d":function(e,t){e.exports=require("core-js/modules/es6.regexp.split")},"5d58":function(e,t,n){e.exports=n("8079")},6186:function(e,t,n){"use strict";var o=n("b322"),s=n.n(o);s.a},"620d":function(e,t,n){"use strict";var o=n("e211"),s=n.n(o);s.a},6619:function(e,t){e.exports=require("core-js/modules/es6.regexp.to-string")},"67a2":function(e,t){e.exports=require("core-js/library/fn/object/get-own-property-descriptor")},"67bb":function(e,t,n){e.exports=n("bea1")},"682e":function(e,t){e.exports=require("core-js/library/fn/promise")},6950:function(e,t,n){"use strict";var o=n("06c6"),s=n.n(o);s.a},"6c3b":function(e,t,n){},"6de4":function(e,t,n){},"6e49":function(e,t,n){},"6f18":function(e,t,n){},"73f4":function(e,t,n){"use strict";var o=n("0b8c"),s=n.n(o);s.a},7578:function(e,t,n){"use strict";var o=n("785e"),s=n.n(o);s.a},7612:function(e,t,n){},"774e":function(e,t,n){e.exports=n("afb5")},"785e":function(e,t,n){},"789a":function(e,t,n){},"792c":function(e,t,n){"use strict";var o=n("0782"),s=n.n(o);s.a},"795b":function(e,t,n){e.exports=n("682e")},"7e8c":function(e,t){e.exports=require("core-js/library/fn/json/stringify")},"7ea8":function(e,t,n){},8079:function(e,t){e.exports=require("core-js/library/fn/symbol/iterator")},"80a8":function(e,t){e.exports=require("core-js/modules/web.dom.iterable")},"85f2":function(e,t,n){e.exports=n("4d40")},"86b1":function(e,t,n){"use strict";var o=n("e649"),s=n.n(o);s.a},"86f6":function(e,t,n){},8973:function(e,t,n){},"8bbf":function(e,t){e.exports=require("vue")},"8cd0":function(e,t,n){"use strict";var o=n("6de4"),s=n.n(o);s.a},9147:function(e,t,n){},"935c":function(e,t){e.exports=require("core-js/library/fn/object/get-own-property-symbols")},9403:function(e,t,n){},9588:function(e,t){e.exports=require("file-saver")},"96f5":function(e,t,n){"use strict";var o=n("9147"),s=n.n(o);s.a},9754:function(e,t,n){},"979d":function(e,t){e.exports=require("v-clipboard")},a39c:function(e,t,n){"use strict";var o=n("9754"),s=n.n(o);s.a},a4bb:function(e,t,n){e.exports=n("a898")},a4dd:function(e,t,n){"use strict";var o=n("c974"),s=n.n(o);s.a},a745:function(e,t,n){e.exports=n("4764")},a79b:function(e,t,n){"use strict";var o=n("445a"),s=n.n(o);s.a},a898:function(e,t){e.exports=require("core-js/library/fn/object/keys")},ab1a:function(e,t){e.exports=require("core-js/modules/es6.string.anchor")},adf5:function(e,t,n){"use strict";var o=n("379a"),s=n.n(o);s.a},afb5:function(e,t){e.exports=require("core-js/library/fn/array/from")},b0b2:function(e,t){e.exports=require("@fortawesome/fontawesome-svg-core")},b0e1:function(e,t){e.exports=require("core-js/modules/es6.string.starts-with")},b322:function(e,t,n){},b4f3:function(e,t){e.exports=require("froala-editor/css/froala_editor.pkgd.min.css")},b55d:function(e,t,n){},b846:function(e,t,n){"use strict";var o=n("c29e"),s=n.n(o);s.a},bb85:function(e,t,n){"use strict";var o=n("ebbf"),s=n.n(o);s.a},bea1:function(e,t){e.exports=require("core-js/library/fn/symbol")},c192:function(e,t,n){"use strict";var o=n("dc48"),s=n.n(o);s.a},c1ba:function(e,t,n){"use strict";var o=n("9403"),s=n.n(o);s.a},c1de:function(e,t,n){"use strict";var o=n("6e49"),s=n.n(o);s.a},c29e:function(e,t,n){},c31d:function(e,t,n){"use strict";var o=n("0be4"),s=n.n(o);s.a},c513:function(e,t,n){"use strict";var o=n("b55d"),s=n.n(o);s.a},c5e1:function(e,t){e.exports=require("jquery")},c8bb:function(e,t,n){e.exports=n("2a3b")},c974:function(e,t,n){},c9a8:function(e,t,n){"use strict";var o=n("e8db"),s=n.n(o);s.a},cebe:function(e,t){e.exports=require("axios")},d036:function(e,t){e.exports=require("core-js/modules/es6.number.constructor")},d116:function(e,t,n){"use strict";var o=n("f499"),s=n.n(o);n("25fc"),n("5a1d"),n("44d6"),n("0ca7"),n("9588");t["a"]={computed:{extraDebug:function(){return this.$content?this.$content.store.state.extraDebug:(console.error("this.$content not defined"),!0)},isEditing:function(){switch(this.$content.store.state.mode){case"view":case"live":return!1}return!0},pageEditMode:function(){return this.$content&&this.$content.store.state.mode?this.$content.store.state.mode:"view"},isEditMode:function(){return!!this.$content&&"edit"==this.$content.store.state.mode},isDesignMode:function(){return!!this.$content&&"debug"==this.$content.store.state.mode},isViewMode:function(){return this.isLive},isLive:function(){return!(this.isEditMode||this.isDesignMode)},editModeClass:function(){if(this.$content&&this.$content.store.state.mode){var e=this.$content.store.state.mode,t="c-edit-mode-".concat(e);return"c-edit-mode-debug"===t?t+=" c-edit-mode-design":"c-edit-mode-design"===t&&(t+=" c-edit-mode-debug"),this.element&&(this.element===this.$content.store.getters.propertyElement&&(t+=" c-selected"),this.element===this.$content.store.state.expandedElement&&(t+=" c-expanded")),t}return"c-edit-mode-view"},debugClass:function(){return"debug"===this.pageEditMode?"tt-debug":""},showDropAreas:function(){return"layout"===this.pageEditMode||"debug"===this.pageEditMode||!("edit"!==this.pageEditMode||!this.$content.store.state.dragging)}},methods:{isPageMode:function(e){return e.split(",").includes(this.pageEditMode)},selectThisElement:function(){if(console.log("selectThisElement()"),"view"!=this.pageEditMode){var e=this.element;this.$content.setPropertyElement({element:e})}},copyStyle:function(e,t,n){e[n]&&(t[n]=e[n])},safeJSON:function(e){var t=function(e,t){if("_parent"!==e)return t},n=s()(e,t,4);return n}}}},d2c0:function(e,t,n){"use strict";var o=n("e1e1"),s=n.n(o);s.a},d5e2:function(e,t,n){"use strict";var o=n("8973"),s=n.n(o);s.a},d6ce:function(e,t,n){"use strict";var o=n("2f7f"),s=n.n(o);s.a},d965:function(e,t,n){},dc48:function(e,t,n){},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,o=e.length-1;o>=0;o--){var s=e[o];"."===s?e.splice(o,1):".."===s?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return o.exec(e).slice(1)};function i(e,t){if(e.filter)return e.filter(t);for(var n=[],o=0;o<e.length;o++)t(e[o],o,e)&&n.push(e[o]);return n}t.resolve=function(){for(var t="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var r=s>=0?arguments[s]:e.cwd();if("string"!==typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,o="/"===r.charAt(0))}return t=n(i(t.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+t||"."},t.normalize=function(e){var o=t.isAbsolute(e),s="/"===r(e,-1);return e=n(i(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function o(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var s=o(e.split("/")),i=o(n.split("/")),r=Math.min(s.length,i.length),a=r,c=0;c<r;c++)if(s[c]!==i[c]){a=c;break}var l=[];for(c=a;c<s.length;c++)l.push("..");return l=l.concat(i.slice(a)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=s(e),n=t[0],o=t[1];return n||o?(o&&(o=o.substr(0,o.length-1)),n+o):"."},t.basename=function(e,t){var n=s(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return s(e)[3]};var r="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e1e1:function(e,t,n){},e211:function(e,t,n){},e265:function(e,t,n){e.exports=n("935c")},e649:function(e,t,n){},e8db:function(e,t,n){},ebbf:function(e,t,n){},f02f:function(e,t,n){},f499:function(e,t,n){e.exports=n("7e8c")},f61e:function(e,t){e.exports=require("core-js/modules/es6.array.sort")},fb15:function(e,t,n){"use strict";var o;(n.r(t),"undefined"!==typeof window)&&((o=window.document.currentScript)&&(o=o.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(n.p=o[1]));var s=n("5880"),i=n.n(s),r=n("1ea8"),a=n.n(r),c=n("1918"),l=n.n(c),d=n("232b"),u=n.n(d),p=n("2a8c"),m=n.n(p),v=n("979d"),f=n.n(v),h=n("5d58"),y=n.n(h),g=n("67bb"),b=n.n(g);function C(e){return C="function"===typeof b.a&&"symbol"===typeof y.a?function(e){return typeof e}:function(e){return e&&"function"===typeof b.a&&e.constructor===b.a&&e!==b.a.prototype?"symbol":typeof e},C(e)}function E(e){return E="function"===typeof b.a&&"symbol"===C(y.a)?function(e){return C(e)}:function(e){return e&&"function"===typeof b.a&&e.constructor===b.a&&e!==b.a.prototype?"symbol":C(e)},E(e)}var _=n("795b"),x=n.n(_);n("80a8"),n("f61e"),n("25fc");function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var $=n("85f2"),S=n.n($);function M(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),S()(e,o.key,o)}}function I(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),e}var k=n("cebe"),T=n.n(k),P=n("4da6"),j=n.n(P);n("2dcf"),n("6619");var L=function(){function e(t){var n=this;if(w(this,e),!t)return console.error("Contentservice was passed null options, so will be disabled."),void(this.disabled=!0);this.disabled=!1,console.log("&&& Contentservice constructor",t),this.protocol=t.protocol?t.protocol:"https",this.host=t.host?t.host:"api.contentservice.io",t.port?this.port=t.port:"http"==this.protocol?this.port=80:this.port=443,this.version=t.version?t.version:"2.0",this.apikey=t.apikey,this.knownElementTypes=[],this.defaultIconPack=t.defaultIconPack?t.defaultIconPack:"fa",this.icons=function(e){return n.defaultIconPack===e},t.defaultIconPack&&console.log("Will use icon pack ".concat(t.defaultIconPack)),console.log("---\x3e icons ---\x3e ".concat(this.defaultIconPack)),this.options=t}return I(e,[{key:"init",value:function(e){console.log("&&& ContentService.init")}},{key:"endpoint",value:function(){var e="".concat(this.protocol,"://").concat(this.host,":").concat(this.port,"/api/").concat(this.version,"/").concat(this.apikey);return console.log("endpoint(): ".concat(e)),e}},{key:"registerLayoutType",value:function(e,t,n,o,s){var i="".concat(n,"-props");this.knownElementTypes[t]={layoutType:t,label:t,name:t,category:"",componentName:n,propertyComponentName:i,component:o,propertyComponent:s},console.log("registering non-toolbox widget ".concat(n)),e.component(n,o),e.component(i,s)}},{key:"getLayoutType",value:function(e){return this.knownElementTypes[e]}},{key:"registerWidget",value:function(e,t){var n=t.name,o=t.label,s=t.category,i=t.iconClass,r=t.iconClass5,a=t.componentName,c=t.component,l=t.propertyComponent,d=t.data;o||(o=n),s||(s="");var u="".concat(a,"-props");this.knownElementTypes[n]={layoutType:n,name:n,label:o,category:s,iconClass:i,iconClass5:r,componentName:a,propertyComponentName:u,component:c,propertyComponent:l,data:d,dragtype:"component"},console.log("registering toolbox widget ".concat(a)),e.component(a,c),e.component(u,l)}},{key:"toolboxCategories",value:function(){var e=[];for(var t in this.knownElementTypes)if(this.knownElementTypes.hasOwnProperty(t)){var n=this.knownElementTypes[t],o=e[n.category];o||(o={name:n.category,types:[]},e[n.category]=o),o.types[t]=n}var s=[];for(var i in e){var r=e[i];s.push(r)}return e=s,e.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),e.forEach(function(e){var t=[];for(var n in e.types)if(e.types.hasOwnProperty(n)){var o=e.types[n];t.push(o)}e.types=t}),e}},{key:"setContent",value:function(e){this.store.dispatch("setContentAction",e)}},{key:"deleteElement",value:function(e){this.store.dispatch("deleteElementAction",e)}},{key:"insertLayout",value:function(e){this.store.dispatch("insertLayoutAction",e)}},{key:"setProperty",value:function(e){var t=e.vm,n=e.element,o=e.name,s=e.value,i=e.save;this.store.dispatch("setPropertyAction",{vm:t,element:n,name:o,value:s,save:i})}},{key:"setPropertyInElement",value:function(e){var t=e.vm,n=e.element,o=e.name,s=e.value;console.log("$content.setPropertyInElement",t,n,o,s),this.store.commit("setPropertyInElementMutation",{vm:t,element:n,name:o,value:s})}},{key:"getProperty",value:function(e){var t=e.element,n=e.name,o=e.defaultValue;return t.hasOwnProperty(n)?t[n]:"undefined"!==typeof o?o:void 0}},{key:"setLayout",value:function(e){this.store.commit("setLayout",e)}},{key:"setPropertyElement",value:function(e){this.store.commit("setPropertyElementMutation",e)}},{key:"setExpandedElement",value:function(e){this.store.commit("setExpandedElementMutation",e)}},{key:"setEditMode",value:function(e){this.store.commit("setEditMode",e)}},{key:"toggleEditMode",value:function(){var e=this.store.state.mode,t=this.store.state.previousEditMode;"view"===e?(console.log(" - toggle to ".concat(t)),this.setEditMode({mode:t})):(console.log(" - toggle to view mode"),this.setEditMode({mode:"view",previousEditMode:e}))}},{key:"setSaveMsg",value:function(e){this.store.commit("setSaveMsg",e)}},{key:"updateElementProperty",value:function(e){this.store.commit("updateElementProperty",e)}},{key:"insertLayoutMutation",value:function(e){this.store.commit("insertLayoutMutation",e)}},{key:"deleteElementMutation",value:function(e){this.store.commit("deleteElementMutation",e)}},{key:"refresh",value:function(e){this.store.commit("refreshMutation",e)}},{key:"select",value:function(e,t,n){var o=this,s=arguments;return new x.a(function(i,r){if(o.options.debug&&console.log("select()"),o.disabled)return r(new Error("contentservice disabled"));var a=E(t);E(n),"undefined"===typeof param3||E(param3);if(3===s.length){var c=t,l=n;if("string"!=typeof c)return console.log("CrowdHound.select: anchor must be a string: "+c+", "+E(c)),r(new Error("invalid anchor parameter"));if("$"!=c.charAt(0))return console.log("CrowdHound.select: anchor must start with '$': "+c),r(new Error("invalid anchor parameter - must start with '$'"));if("string"!=typeof l)return console.log("CrowdHound.select: anchorType must be a string: "+l+", "+E(l)),r(new Error("invalid anchor parameter"));console.log("select anchor");var d={elementId:c,type:l}}else{if(2!==s.length)return void r("Unknown parameters to CrowdHound.select");if("object"==a)d=t;else d={elementId:""+t}}var u="".concat(o.endpoint(),"/elements");o.options.debug&&console.log("URL= "+u),console.log("CrowdHound.select()"),console.log("  url="+u),console.log("  params=",d),T()({method:"get",url:u,headers:{"Content-Type":"application/json",Accept:"application/json"},params:d}).then(function(e){var t=e.data;t instanceof Array&&t.length>0&&t[0].__currentUser&&(t[0],t.shift());var n={cooked:!1,params:d,elements:t};return i(n)}).catch(function(t){j()(e,u,d,t),r(t)})})}},{key:"update",value:function(e,t){var n=this;return console.log("ContentService.js:update()",t),console.log("element.description.length=",t.description.length),new x.a(function(o,s){if(n.options.debug&&console.log("select()"),n.disabled)return s(new Error("contentservice disabled"));var i="".concat(n.endpoint(),"/element");T()({method:"put",url:i,headers:{"Content-Type":"application/json",Accept:"application/json"},data:t}).then(function(e){return o("ok")}).catch(function(n){j()(e,i,t,n),s(n)})})}}]),e}(),D=L,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sane?n("div",{staticClass:"content-dummy"},[n("crowdhound-minimal-element",{attrs:{element:e.element,level:0}})],1):e._e()},O=[],N=(n("ab1a"),n("262e")),q=n.n(N),F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"crowdhound-comment"},[e.element?n("div",{staticClass:"surround"},[e._v(e._s(e.level)+": #"+e._s(e.element.id)+" #"+e._s(e.element.rootId)+" "+e._s(e.element.status)+" ("+e._s(e.element.type)+")"),n("br"),e._v("description = "+e._s(e.element.description)),n("br"),e._v("summary = "+e._s(e.element.summary)),n("br"),e._v("title = "+e._s(e.element.title)),n("br"),e._l(e.element.children,function(t){return n("div",[n("crowdhound-minimal-element",{attrs:{element:t,level:e.level+1}})],1)})],2):e._e()])},z=[],B=(n("d036"),{name:"crowdhound-minimal-element",props:{element:Object,level:Number}}),R=B;n("bb85");function H(e,t,n,o,s,i,r,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),o&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),r?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},l._ssrRegister=c):s&&(c=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}var V=H(R,F,z,!1,null,"4fd87f03",null);V.options.__file="CrowdhoundMinimalElement.vue";var U=V.exports,J={name:"crowdhound-minimal",components:{CrowdhoundMinimalElement:U},props:{contentId:String,anchor:String},data:function(){return{element:null,selectError:!1,sane:!0}},watch:{anchor:function(e,t){this.load()},contentId:function(e,t){this.load()}},methods:{load:function(){var e=this;if(this.$content.disabled)console.error("Contentservice disabled");else{var t={elementId:this.contentId?this.contentId:this.anchor,withChildren:!0};this.$content.select(this,t).then(function(t){t.elements.length>0?e.element=t.elements[0]:e.element=null}).catch(function(n){var o="Error loading comments";q()(e,o,t,n),e.selectError=!0})}}},created:function(){if(!this.$content)return console.error("CrowdhoundMinimal.created(): this.$content not defined: has ContentService been initialised?"),void(this.sane=!1);this.load()}},W=J,K=(n("96f5"),H(W,A,O,!1,null,"63d84ddb",null));K.options.__file="CrowdhoundMinimal.vue";var Y=K.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sane?n("div",[n("div",{staticClass:"tt-content",class:e.classForMode,attrs:{zclass:"view"===e.pageEditMode?"tt-mode-view":""}},[e._v("<content-content("),e.contentId?n("span",[e._v(" contentId")]):e._e(),e.layout?n("span",[e._v(" layout")]):e._e(),e._v(" )>"),n("br"),"debug"==e.pageEditMode?n("div",{staticClass:"debug"},[e._v("content")]):e._e(),e.sanitizedContentComp?n("div",{staticClass:"tt-content-layout"},[n("content-children",{attrs:{element:e.$content.store.state.layout}})],1):e._e()])]):e._e()},X=[],Z={name:"content-content",props:{type:{type:String,required:!0},layout:Object,contentId:String,contentdata:Object},data:function(){return{sane:!0}},computed:{dump:function(){return this.$content.elementToJson(this.contentdata.layout)},classForMode:function(){switch(this.pageEditMode){case"view":return"tt-mode-view";case"edit":return"tt-mode-edit";case"layout":return"tt-mode-layout";case"debug":return"tt-mode-debug";case"live":return"tt-mode-live"}},sanitizedContentComp:function(){if(this.$content&&this.contentdata&&this.contentdata.data&&this.contentdata.data.layout){var e=this.$content.util.sanitizeLayout(this.contentdata.data.layout);return e}return console.error("content-content: missing contentdata.data.layout"),{}}},methods:{},created:function(){if(console.error("------------------------------"),console.log("contentId=",this.contentId),console.log("layout=",this.layout),!this.$content)return console.error("ContentLayoutEditor.created(): this.$content not defined: has ContentService been initialised?"),void(this.sane=!1);this.contentId?this.$content.setContent({vm:this,type:"crowdhound",contentId:this.contentId}):this.layout?this.$content.setContent({vm:this,type:"fixed",layout:this.layout}):console.error("content-content must be provided prop 'layout' or prop 'contentId'")}},Q=Z,ee=(n("1145"),H(Q,G,X,!1,null,"dd3c391a",null));ee.options.__file="ContentContent.vue";var te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sane?n("div",[n("Split",{directives:[{name:"hotkey",rawName:"v-hotkey",value:e.keymap,expression:"keymap"}],staticClass:"c-triple-pane",class:[{"c-editing-layout":e.isEditing},{"c-not-editing-layout":!e.isEditing},{"c-has-left-pane":e.hasLeftSlot},{"c-no-left-pane":!e.hasLeftSlot}],style:e.splitStyle,attrs:{gutterSize:e.gutterSize},on:{onDragEnd:e.onDragEnd}},[e.hasLeftSlot?n("SplitArea",{staticClass:"c-left-pane",attrs:{size:e.leftSize}},[e._t("left-pane")],2):e._e(),n("SplitArea",{staticClass:"c-middle-pane",attrs:{size:e.middleSize}},["view"!==e.pageEditMode?n("div",{staticClass:"c-editbar",on:{click:function(t){t.stopPropagation(),e.switchMode(null)}}},[n("div",{staticClass:"c-editbar-contentId"},[e._v(e._s(e.crowdhoundAnchor))]),n("div",{staticClass:"c-editbar-right"},[e._v(e._s(e.$content.store.state.saveMsg))]),"edit"===e.pageEditMode||"layout"===e.pageEditMode||"debug"===e.pageEditMode?n("div",{staticClass:"c-editbar-mode-label"},[n("span",{class:"edit"===e.pageEditMode?"c-selected-mode-style":"",on:{click:function(t){t.stopPropagation(),e.switchMode("edit")}}},[e._v("edit")]),e._v(" / "),n("span",{class:"debug"===e.pageEditMode?"c-selected-mode-style":"",on:{click:function(t){t.stopPropagation(),e.switchMode("debug")}}},[e._v("design")])]):n("div",{staticClass:"c-editbar-mode-label"},[e._v(e._s(e.pageEditMode)+" mode")])]):e._e(),n("div",{staticClass:"c-middle-pane-content"},[e.haveLayout?n("content-children",{attrs:{element:e.$content.store.state.layout,context:e.mycontext}}):n("div",[e._t("middle-pane"),e._t("default")],2)],1)]),n("SplitArea",{staticClass:"c-right-pane",style:e.rightPaneStyle,attrs:{"zv-show":"rightSize > 0",size:e.rightSize,minSize:e.rightSize>0?200:0}},[e.hasRightSlot?e._t("right-pane"):n("Split",{style:e.propertiesSplitStyle,attrs:{direction:"vertical",gutterSize:e.gutterSize}},[n("SplitArea",{staticClass:"c-properties-pane",attrs:{size:40,minSize:300}},[n("h1",{staticClass:"title"},[e._v("Properties")]),n("content-element-props",{attrs:{level:0}})],1),n("SplitArea",{staticClass:"c-components-pane",attrs:{size:60,minSize:150}},[n("h1",{staticClass:"title"},[e._v("Toolbox")]),n("content-toolbox")],1)],1)],2)],1)],1):e._e()},oe=[],se=n("001a"),ie=se["a"],re=(n("a4dd"),n("d6ce"),H(ie,ne,oe,!1,null,"61ef23d6",null));re.options.__file="ContentLayoutEditor.vue";var ae=re.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sane?n("div",{staticClass:"toolbox-pane"},[n("div",{staticClass:"my-components"},e._l(this.$content.toolboxCategories(),function(t){return n("div",{staticClass:"my-category"},[n("div",{staticClass:"my-category-name"},[e._v(e._s(t.name))]),e._l(t.types,function(t){return"component"==t.dragtype?n("div",{staticClass:"my-widget"},[n("drag",{staticClass:"my-drag",attrs:{"transfer-data":t},on:{dragstart:e.dragStart,dragend:e.dragStop}},[n("div",{staticClass:"my-image",class:e.iconClass(t)})]),n("div",{staticClass:"my-component-label"},[e._v(e._s(t.label))])],1):e._e()})],2)}),0),e._m(0)]):e._e()},le=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"accreditation"},[e._v("(icons courtesy of "),n("a",{attrs:{href:"https://icons8.com",target:"_blank"}},[e._v("icons8.com")]),e._v(")")])}],de=(n("5a1d"),[{dragtype:"component",name:"fixed-position-container",iconClass:"fa-arrows-h",iconClass5:"fas fa-arrows-alt-h",element:{type:"fixed-position-container"},data:{type:"contentservice.io",version:"1.0",source:"toolbox",layout:{type:"fixed-position-container"}}}]),ue={name:"tooltwist-layout",props:{layout:Object,editable:String,toolbox:Object},data:function(){return{theToolbox:{},sane:!0}},methods:{iconClass:function(e){if(this.$content){if(this.$content.icons("fa")){if("string"===typeof e.iconClass){var t,n=e.iconClass.split(" "),o="fa";(t=n.indexOf("fa"))>-1&&(o=n[t],n.splice(t,1));var s="fa-2x";return((t=n.indexOf("fa-2x"))>-1||(t=n.indexOf("fa-3x"))>-1||(t=n.indexOf("fa-4x"))>-1||(t=n.indexOf("fa-5x"))>-1)&&(s=n[t],n.splice(t,1)),n.push(o),n.push(s),n}return["fa","fa-2x","fa-word-file-o"]}if("string"===typeof e.iconClass5){var i,r=e.iconClass5.split(" "),a=this.$content.defaultIconPack;((i=r.indexOf("fas"))>-1||(i=r.indexOf("far"))>-1||(i=r.indexOf("fal"))>-1||(i=r.indexOf("fab"))>-1)&&(a=r[i],r.splice(i,1));var c="fa-2x";return((i=r.indexOf("fa-2x"))>-1||(i=r.indexOf("fa-3x"))>-1||(i=r.indexOf("fa-4x"))>-1||(i=r.indexOf("fa-5x"))>-1)&&(c=r[i],r.splice(i,1)),r.push(a),r.push(c),r}return["fas","fa-2x","fa-word-file-o"]}return["fa","fa-2x","fa-word-file-o"]},dragStart:function(){this.$content.store.commit("dragStart",{})},dragStop:function(){this.$content.store.commit("dragStop",{})}},created:function(){if(!this.$content)return console.error("ContentToolbox.created(): this.$content not defined: has ContentService been initialised?"),void(this.sane=!1);this.toolbox?this.theToolbox=this.toolbox:this.theToolbox=de}};var pe=ue,me=(n("c9a8"),H(pe,ce,le,!1,null,"092a2038",null));me.options.__file="ContentToolbox.vue";var ve=me.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sane?n("div",{directives:[{name:"hotkey",rawName:"v-hotkey",value:e.keymap,expression:"keymap"}],staticClass:"my-content-pane container is-fluid is-fullheight"},[e.extraDebug?n("div",{staticClass:"has-text-centered"},[e._v("<content-pane>"),n("br"),e._v("pageEditMode="+e._s(e.pageEditMode)),n("br")]):e._e(),n("div",{staticClass:"multipane-container"},["view"!==e.pageEditMode?n("div",{staticClass:"tt-editable-header",on:{click:function(t){return t.stopPropagation(),e.cycleEditMode(t)}}},[n("div",{staticClass:"tt-editable-mode"},[e._v(e._s(e.pageEditMode)+" mode")])]):e._e(),e._t("default")],2)]):e._e()},he=[],ye=(n("8bbf"),n("d116")),ge=0,be={name:"content-pane",props:{editable:String},mixins:[ye["a"]],data:function(){return{sane:!0}},computed:{keymap:function(){return{"ctrl+alt+esc":{keydown:this.toggleEditing}}}},methods:{toggleEditing:function(e){if(e.timeStamp===ge)return!0;ge=e.timeStamp;var t=this.$content.store.state.mode,n=this.$content.store.state.previousEditMode;"view"===t?this.$content.setEditMode({mode:n}):this.$content.setEditMode({mode:"view",previousEditMode:t})},cycleEditMode:function(){var e=this.$content.store.state.mode;switch(e){case"edit":this.$content.setEditMode({mode:"debug",previousEditMode:"debug"});break;case"debug":case"layout":this.$content.setEditMode({mode:"edit",previousEditMode:"edit"});break}}},created:function(){if(!this.$content)return console.error("ContentLayoutEditor.created(): this.$content not defined: has ContentService been initialised?"),void(this.sane=!1)}},Ce=be,Ee=(n("c192"),H(Ce,fe,he,!1,null,"23a82250",null));Ee.options.__file="ContentPane.vue";var _e=Ee.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tt-element"},[e.componentNameForElement?n(e.componentNameForElement,{tag:"component",attrs:{context:e.context,element:e.element}}):n("div",[e._v("Unknown element type '"+e._s(e.element.type)+"'")])],1)},we=[],$e={name:"content-element",props:{context:{type:Object,required:!0},element:Object},computed:{componentNameForElement:function(){var e=this.element.type,t=this.$content.getLayoutType(e);return t?t.componentName:null}}},Se=$e,Me=(n("c1ba"),H(Se,xe,we,!1,null,null,null));Me.options.__file="ContentElement.vue";var Ie=Me.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sane?n("div",{staticClass:"ch-elem"},[e._l(e.hierarchyToSelectedElement,function(t){return n("div",[e.propertyComponentNameForElement2(t)?n(e.propertyComponentNameForElement2(t),{tag:"component",attrs:{element:t}}):n("div",[n("div",{staticClass:"tt-property-element-unknown-type"},[e._v("Unknown type ("+e._s(t.type)+")")])])],1)}),n("div",{staticClass:"tt-property-footer"})],2):e._e()},Te=[],Pe={name:"content-element-props",mixins:[ye["a"]],props:{level:Number},data:function(){return{sane:!0}},computed:{hierarchyToSelectedElement:function(){var e=this.$content.store.state.pathToSelectedElement;return e},element:function(){var e=this.$content.store.state.pathToSelectedElement;return e.length>this.level?e[this.level]:null},haveMore:function(){var e=this.$content.store.state.pathToSelectedElement;return e.length>this.level+1},propertyComponentNameForElement:function(){console.log("propertyComponentNameForElement(".concat(this.element.type,")"));var e=this.element.type,t=this.$content.getLayoutType(e);return t?t.propertyComponentName:null}},methods:{propertyComponentNameForElement2:function(e){var t=e.type,n=this.$content.getLayoutType(t);return n?n.propertyComponentName:null}},created:function(){if(!this.$content)return console.error("ContentLayoutEditor.created(): this.$content not defined: has ContentService been initialised?"),void(this.sane=!1)}},je=Pe,Le=(n("6186"),H(je,ke,Te,!1,null,null,null));Le.options.__file="ContentElementProps.vue";var De=Le.exports,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-properties-header"},[e._v("YARP AND stuff")])},Oe=[],Ne={name:"content-properties-header",mixins:[ye["a"]]},qe=Ne,Fe=(n("adf5"),H(qe,Ae,Oe,!1,null,null,null));Fe.options.__file="ContentPropertiesHeader.vue";var ze=Fe.exports,Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sane?n("div",[e.element&&e.element.children?n("div",{staticClass:"content-children",class:e.showDropAreas?"c-show-drop-areas":""},[e.extraDebug?n("div",[e._v("<content-children>"),n("br")]):e._e(),e._l(e.element.children,function(t,o){return[t?[e.showDropAreas?n("drop",{on:{drop:function(n){var o=arguments.length,s=Array(o);while(o--)s[o]=arguments[o];e.handleDrop.apply(void 0,[e.element,t].concat(s))}},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"droparea",class:[t.transferData?"dropover":""],attrs:{contenteditable:"true"},on:{paste:function(t){e.onPaste(t,o)},input:e.onInput}})]}}])}):e._e(),e.componentNameForElement(t)?n(e.componentNameForElement(t),{tag:"component",attrs:{element:t,context:e.context}}):[e._v("Unknown element type '"+e._s(t.type)+"'"),n("br")]]:[e._v("Missing child "+e._s(o)),n("br")]]}),e.showDropAreas?n("drop",{on:{drop:function(t){var n=arguments.length,o=Array(n);while(n--)o[n]=arguments[n];e.handleDrop.apply(void 0,[e.element,null].concat(o))}},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"droparea",class:[t.transferData?"dropover":""],attrs:{contenteditable:"true"},on:{paste:function(t){e.onPaste(t,"last")},input:e.onInput}})]}}])}):e._e()],2):e._e()]):e._e()},Re=[],He={name:"content-children",components:{},props:{element:Object,context:{type:Object,required:!0}},data:function(){return{sane:!0}},mixins:[ye["a"]],methods:{componentNameForElement:function(e){var t=e.type,n=this.$content.getLayoutType(t);return n?n.componentName:null},onPaste:function(e,t){var n,o;console.log("onPaste(".concat(t,")"),e),e.stopPropagation(),e.preventDefault(),n=e.clipboardData||window.clipboardData,o=n.getData("Text");var s=this.element;return console.log("parent is ".concat(s.id," (").concat(s.type,") [").concat(s.children.length,"]")),"last"===t&&(t=s.children.length),console.log("insert at: ".concat(t)),console.log("data:",o),console.log("data:",E(o)),"string"!==typeof o?this.reportError("Invalid paste object (not text)."):(this.$content.insertLayout({vm:this,parent:s,position:t,layout:o}),!1)},onInput:function(e){return e.target.textContent="",!1},reportError:function(e){return alert(e),!1},handleDrop:function(e,t,n,o){if(console.log("Children.handleDrop(element=".concat(e.id,", child=").concat(t?t.id:'"null"',"), data="),n),"component"==n.dragtype){var s=n.data;if(t){for(var i=0;i<e.children.length;i++)if(e.children[i]===t){console.log("Insert at position ".concat(i)),this.$content.insertLayout({vm:this,parent:e,position:i,layout:s});break}}else this.$content.insertLayout({vm:this,parent:e,position:-1,layout:s})}else console.log("Dropped non-component: '".concat(n.dragtype,"'"))}},created:function(){if(!this.$content)return console.error("ContentLayoutEditor.created(): this.$content not defined: has ContentService been initialised?"),void(this.sane=!1)}},Ve=He,Ue=(n("d5e2"),H(Ve,Be,Re,!1,null,"1e6a61f0",null));Ue.options.__file="ContentChildren.vue";var Je=Ue.exports,We=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[e._v("Content")]),n("transition",{attrs:{name:"c-property-list-transition"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isExpandedElement,expression:"isExpandedElement"}],staticClass:"c-element-properties"},[n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("ID")]),n("div",{staticClass:"c-property-value"},[e._v(e._s(e.element.id))])])])])],1)},Ke=[],Ye={name:"content-content-props",props:{element:Object}},Ge=Ye,Xe=H(Ge,We,Ke,!1,null,null,null);Xe.options.__file="ContentContentProps.vue";var Ze=Xe.exports,Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-content-layout",class:["debug"==e.pageEditMode?"tt-container-outline":""]},["view"===e.pageEditMode?n("div",{staticClass:"container",on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("content-children",{attrs:{element:e.element}})],1):"edit"===e.pageEditMode?n("div",{staticClass:"container",on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("content-children",{attrs:{element:e.element}})],1):"debug"===e.pageEditMode?n("div",{on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("div",{staticClass:"c-layout-mode-heading"},[e._v("layout")]),n("div",{staticClass:"container"},[n("content-children",{staticClass:"my-content",attrs:{element:e.element}})],1)]):n("div",{staticClass:"container"},[n("content-children",{attrs:{element:e.element}})],1)])},et=[],tt={name:"content-container",components:{},props:{element:Object},mixins:[ye["a"]],data:function(){return{}},computed:{sectionStyle:function(){var e={};return copyStyle(this.element,e,"background-color"),copyStyle(this.element,e,"padding"),copyStyle(this.element,e,"padding-top"),copyStyle(this.element,e,"padding-bottom"),copyStyle(this.element,e,"padding-left"),copyStyle(this.element,e,"padding-right"),e}}},nt=tt,ot=(n("86b1"),H(nt,Qe,et,!1,null,"6c50bc7e",null));ot.options.__file="ContentLayout.vue";var st=ot.exports,it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[n("div",{staticClass:"my-buttons"},[n("span",{on:{click:e.downloadMyElement}},[e._v(" "),n("i",{staticClass:"fa fa-download fas fa-download"}),e._v(" ")]),n("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.myElementCopyToClipboard,expression:"myElementCopyToClipboard"},{name:"clipboard",rawName:"v-clipboard:success",value:e.clipboardSuccessHandler,expression:"clipboardSuccessHandler",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.clipboardErrorHandler,expression:"clipboardErrorHandler",arg:"error"}]},[e._v(" "),n("i",{staticClass:"fa fa-files-o fas fa-copy"}),e._v(" ")]),n("span",{on:{click:e.deleteMyElement}},[e._v(" "),n("i",{staticClass:"fa fa-trash-o fas fa-trash-alt"}),e._v(" ")])]),e._v("Layout")])])},rt=[],at=n("9588"),ct=n.n(at),lt={props:{element:Object},computed:{isExpandedElement:function(){return this.element===this.$content.store.state.expandedElement},isSelectedElement:function(){return this.element===this.$content.store.getters.propertyElement},propertyClass:function(){var e="";return this.element===this.$content.store.state.expandedElement&&(e+=" c-expanded"),this.element===this.$content.store.getters.propertyElement?e+=" c-selected":e+=" c-not-selected",e}},methods:{setExpandedElement:function(){if("view"!=this.pageEditMode){var e=this.element;this.$content.setExpandedElement({element:e})}}}},dt=n("f499"),ut=n.n(dt),pt={computed:{},methods:{deleteMyElement:function(){console.log("Deleting element ".concat(this.element.id)),this.$content.deleteElement({vm:this,element:this.element})},myElementCopyToClipboard:function(){return console.log("myElementCopyToClipboard()"),this.bundleMyElement()},myElementCutToClipboard:function(){console.log("myElementCutToClipboard()");var e=this.bundleMyElement();return this.$content.deleteElement({vm:this,element:this.element}),e},clipboardSuccessHandler:function(e){e.value,e.event;var t=this.element.type.substring(0,1).toUpperCase()+this.element.type.substring(1),n="".concat(t," has been copied to the clipboard");this.$toast?this.$toast.open({message:"".concat(n),type:"is-success"}):alert(n)},clipboardErrorHandler:function(e){var t=e.value;e.event;console.log("error",t)},downloadMyElement:function(){console.log("downloadMyElement()");var e=this.bundleMyElement(),t=new Blob([e],{type:"text/plain;charset=utf-8"}),n="layout";this.$content.store.state.contentId&&(n+="-"+this.$content.store.state.contentId.substring(1)),n+="-".concat(this.element.type,"-").concat(this.element.id,".txt"),ct.a.saveAs(t,n)},bundleMyElement:function(){var e={type:"contentservice.io",version:"1.0",source:this.$content.store.state.contentId,timestamp:new Date,layout:this.element};this.$authservice&&this.$authservice.user&&(e.user=this.$authservice.user,e.username=this.$authservice.user.fullname);var t=ut()(e,null,2);return t}}},mt={name:"content-layout-props",mixins:[lt,pt],computed:{protectedMode:{get:function(){var e=this.element["mode"];return e||"-"},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:"mode",value:e})}},protectedIsFluid:{get:function(){var e=this.element["is-fluid"];return e||"-"},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:"is-fluid",value:e})}},protectedBgColor:{get:function(){var e=this.element["background-color"];return e||"-"},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:"background-color",value:e})}}}},vt=mt,ft=(n("6950"),H(vt,it,rt,!1,null,"78f28d2b",null));ft.options.__file="ContentLayoutProps.vue";var ht=ft.exports,yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isPageMode("view")?n("span",[e._v(e._s(e.protectedContent))]):e.isDesignMode?n("div",{staticClass:"my-debug-box"},[n("div",{staticClass:"my-debug-header"},[e._v("text"),n("br"),e._v("contentId: "+e._s(e.contentId))]),n("span",{staticClass:"stop",on:{click:function(t){e.selectThisElement,e.itemClick(e.element)}}},[e._v(e._s(e.protectedContent))])]):n("span",{staticClass:"stop",on:{click:function(t){e.selectThisElement,e.itemClick(e.element)}}},[e._v(e._s(e.protectedContent))]),e.isPageMode("edit,debug")&&e.editing?n("div",[n("hr"),e._v(" "+e._s(e.saveMsg)),n("br"),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.protectedContent,expression:"protectedContent"}],staticClass:"textarea my-input",domProps:{value:e.protectedContent},on:{input:function(t){t.target.composing||(e.protectedContent=t.target.value)}}})]):e._e()])},gt=[],bt=(n("44d6"),n("0ca7"),""),Ct="waiting to save",Et="saving",_t="your changes have been saved",xt="warning: your changes have not been saved",wt=2e3,$t={name:"content-text",components:{},props:{contentId:String,element:Object,context:{type:Object,required:!0}},data:function(){return{editing:!1,title:"",summary:"",description:"",crowdhoundElement:{},saveMsg:"",saveTimeout:null}},mixins:[ye["a"]],computed:{useCrowdhound:function(){return"undefined"!=typeof this.contentId},protectedContent:{get:function(){if(this.useCrowdhound)return this.crowdhoundElement.description;var e="text";return this.element[e]},set:function(e){if(this.useCrowdhound)this.crowdhoundElement.description=e,console.log("protectedContent.set: ",e),this.rememberToSave();else{var t="text";this.$content.setProperty({vm:this,element:this.element,name:t,value:e})}}}},methods:{isPageMode:function(e){return e.split(",").includes(this.pageEditMode)},itemClick:function(e){console.log("clicked !"),"edit"!=this.pageEditMode?this.editing=!1:this.editing=!this.editing},rememberToSave:function(){var e=this;console.log("save to Crowdhound (not yet)"),this.saveTimeout||(this.saveMsg=Ct,this.saveTimeout=setTimeout(function(){e.saveTimeout=null,e.saveMsg=Et,e.saveToCrowdhound()},wt))},saveToCrowdhound:function(){var e=this;console.error("saveToCrowdhound"),this.saveMsg=_t,this.$content.update(this,this.crowdhoundElement).then(function(t){setTimeout(function(){e.saveMsg===Ct&&(e.saveMsg=bt)},1700),console.log("result of save:",t),console.log("result of save:",t.data)}).catch(function(t){console.log("Dirty rotten error: ",t),e.saveMsg=xt,e.selectError=!0})}},created:function(){var e=this;if(this.useCrowdhound){if("undefined"===typeof this.$content)return void console.error("this.$content not defined. Remember to us Contentservice.use(Vue).");if(this.$content.disabled)return void console.error("Contentservice disabled");var t="testpage.".concat(this.contentId),n="$testpage.".concat(this.contentId),o="text";this.$content.select(this,n,o).then(function(n){n.elements.length>0?(console.log("result=",n),e.crowdhoundElement=n.elements[0],e.crowdhoundElement.description===t&&(e.crowdhoundElement.description="Lorem ipsum dolor sit amet, purus metus congue morbi hac elit id.")):e.crowdhoundElement={}}).catch(function(t){console.log("Dirty rotten error: ",t),e.selectError=!0})}else console.log("Using description from element in layout")}},St=$t,Mt=(n("a39c"),H(St,yt,gt,!1,null,"9e4c78a8",null));Mt.options.__file="ContentText.vue";var It=Mt.exports,kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[e._v("Text")]),n("transition",{attrs:{name:"c-property-list-transition"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isExpandedElement,expression:"isExpandedElement"}],staticClass:"c-element-properties"},[n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("color")]),n("div",{staticClass:"c-property-value"},[e._v(e._s(e.value("color")))])]),n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("font-family")]),n("div",{staticClass:"c-property-value"},[e._v(e._s(e.value("font-family")))])]),n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("font-size")]),n("div",{staticClass:"c-property-value"},[e._v(e._s(e.value("font-size")))])])])])],1)},Tt=[],Pt={name:"content-text-props",mixins:[lt],props:{element:Object},methods:{value:function(e){var t=this.element[e];return t||"-"}}},jt=Pt,Lt=H(jt,kt,Tt,!1,null,null,null);Lt.options.__file="ContentTextProps.vue";var Dt=Lt.exports,At=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-content-froala",class:e.editModeClass},[e.extraDebug?n("span",[e._v("<content-froala"),e.element?n("span",[e._v(" have element")]):e._e(),e.contentId?n("span",[e._v(" contentId")]):e._e(),e._v(">"),n("br")]):e._e(),e.isDesignMode?n("div",{on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("div",{staticClass:"c-layout-mode-heading"},[n("edit-bar-icons",{attrs:{element:e.element}}),e._v("richtext")],1),n("froala",{attrs:{tag:"div",config:e.config},model:{value:e.protectedText,callback:function(t){e.protectedText=t},expression:"protectedText"}})],1):e.isEditMode?n("div",{on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("froala",{attrs:{tag:"div",config:e.config},model:{value:e.protectedText,callback:function(t){e.protectedText=t},expression:"protectedText"}})],1):[n("froala-view",{attrs:{tag:"div"},model:{value:e.protectedText,callback:function(t){e.protectedText=t},expression:"protectedText"}})]],2)},Ot=[],Nt=0,qt="",Ft="waiting to save",zt="saving",Bt="your changes have been saved",Rt="warning: your changes have not been saved",Ht=2e3,Vt={name:"content-froala",props:{contentId:String,element:Object},mixins:[ye["a"],pt],data:function(){return{crowdhoundElement:null,saveMsg:"",saveTimeout:null,config:{toolbarInline:!0,toolbarButtons:["fontFamily","fontSize","bold","italic","underline","color","-","paragraphFormat","align","formatOL","formatUL","indent","outdent","-","insertImage","insertLink","undo","redo"],charCounterCount:!1,zIndex:1900,events:{"froalaEditor.initialized":function(){}},key:null}}},computed:{useCrowdhound:function(){return"undefined"!=typeof this.contentId},protectedText:{get:function(){if(this.useCrowdhound)return this.crowdhoundElement?this.crowdhoundElement.description:"";var e=this.element.text;return e},set:function(e){if(this.useCrowdhound)this.crowdhoundElement.description=e,console.log("protectedContent.set: ",e),this.rememberToSave();else{var t="text";this.$content.setProperty({vm:this,element:this.element,name:t,value:e})}}}},methods:{rememberToSave:function(){var e=this;console.log("save to Crowdhound (not yet)"),this.saveTimeout||(this.saveMsg=Ft,this.saveTimeout=setTimeout(function(){e.saveTimeout=null,e.saveMsg=zt,e.saveToCrowdhound()},Ht))},saveToCrowdhound:function(){var e=this;this.saveMsg=Bt,this.$content.update(this,this.crowdhoundElement).then(function(t){setTimeout(function(){e.saveMsg===Ft&&(e.saveMsg=qt)},1700),console.log("result of save:",t),console.log("result of save:",t.data)}).catch(function(t){console.log("Dirty rotten error: ",t),e.saveMsg=Rt,e.selectError=!0})}},created:function(){var e=this;if(this.$content&&this.$content.options&&this.$content.options.froalaActivationKey?this.config.key=this.$content.options.froalaActivationKey:Nt++%20===0&&console.error("Froala activation key not provided to ContentService {options.froalaActivationKey}. Froala text areas may not function correctly."),this.useCrowdhound){if(console.log("Selecting text from Crowdhound"),"undefined"===typeof this.$content)return void console.error("this.$content not defined. Remember to us Contentservice.use(Vue).");if(this.$content.disabled)return void console.error("Contentservice disabled");var t="testpage.".concat(this.contentId),n="$testpage.".concat(this.contentId),o="html";console.log("Here we are before select..."),this.$content.select(this,n,o).then(function(n){n.elements.length>0?(console.log("result=",n),e.crowdhoundElement=n.elements[0],e.crowdhoundElement.description===t&&(e.crowdhoundElement.description="\n              Lorem ipsum dolor sit amet, purus metus congue morbi hac elit id.\n              Proin commodo, ridiculus lorem vel fugit lacus, lorem purus pellentesque,\n              imperdiet varius et sed amet. Etiam arcu neque lectus voluptas eros\n              consectetuer. Magna dolores dui dui vestibulum wisi, in sit erat\n              suspendisse habitasse volutpat lacinia. In diam faucibus semper enim\n              est, risus urna faucibus elementum, fusce vitae, vestibulum aenean\n              pellentesque, massa class donec. Consectetuer morbi iaculis quis quam,\n              nec orci praesent lacus ante vitae, vestibulum dui consectetuer parturient.")):e.crowdhoundElement={}}).catch(function(t){console.log("Dirty rotten error: ",t),e.selectError=!0})}}},Ut=Vt,Jt=(n("b846"),H(Ut,At,Ot,!1,null,"dc1c0126",null));Jt.options.__file="ContentFroala.vue";var Wt=Jt.exports,Kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[e._v("RichText")]),n("transition",{attrs:{name:"c-property-list-transition"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isExpandedElement,expression:"isExpandedElement"}],staticClass:"c-element-properties"},[n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("classes")]),n("div",{staticClass:"c-property-value"},[e._v(e._s(e.element.classes))])])])])],1)},Yt=[],Gt={name:"content-froala-props",mixins:[lt],props:{element:Object}},Xt=Gt,Zt=(n("026c"),H(Xt,Kt,Yt,!1,null,"4132244c",null));Zt.options.__file="ContentFroalaProps.vue";var Qt=Zt.exports,en=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-field",class:[e.editModeClass,"debug"==e.pageEditMode?"tt-field-outline":""]},[e.isDesignMode?n("div",{staticClass:"tt-field",on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("div",{staticClass:"c-layout-mode-heading"},[n("edit-bar-icons",{attrs:{element:e.element}}),e._v("field")],1),n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v(e._s(e.protectedLabel))]),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text",placeholder:e.protectedPlaceholder,readonly:""}})]),n("p",{staticClass:"help"},[e._v(e._s(e.protectedHelp))])])]):e.isEditMode?n("div",{staticClass:"tt-field",on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v(e._s(e.protectedLabel))]),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text",placeholder:e.protectedPlaceholder,readonly:""}})]),n("p",{staticClass:"help"},[e._v(e._s(e.protectedHelp))])])]):n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v(e._s(e.protectedLabel))]),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text",placeholder:e.protectedPlaceholder}})]),n("p",{staticClass:"help"},[e._v(e._s(e.protectedHelp))])])])},tn=[],nn=n("268f"),on=n.n(nn),sn=n("e265"),rn=n.n(sn),an=n("a4bb"),cn=n.n(an);function ln(e,t,n){return t in e?S()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=cn()(n);"function"===typeof rn.a&&(o=o.concat(rn()(n).filter(function(e){return on()(n,e).enumerable}))),o.forEach(function(t){ln(e,t,n[t])})}return e}var un=function(e){var t="protected".concat(e.substring(0,1).toUpperCase()).concat(e.substring(1)),n=ln({},t,{get:function(){return this.element[e]},set:function(t){this.$content.setProperty({vm:this,element:this.element,name:e,value:t})}});return n},pn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sane?n("div",{staticClass:"c-heading-icons"},[n("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.myElementCutToClipboard,expression:"myElementCutToClipboard"},{name:"clipboard",rawName:"v-clipboard:success",value:e.clipboardSuccessHandler,expression:"clipboardSuccessHandler",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.clipboardErrorHandler,expression:"clipboardErrorHandler",arg:"error"}]},[e._v(" "),n("font-awesome-icon",{attrs:{icon:"cut"}}),e._v(" ")],1),n("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.myElementCopyToClipboard,expression:"myElementCopyToClipboard"},{name:"clipboard",rawName:"v-clipboard:success",value:e.clipboardSuccessHandler,expression:"clipboardSuccessHandler",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.clipboardErrorHandler,expression:"clipboardErrorHandler",arg:"error"}]},[e._v(" "),n("font-awesome-icon",{attrs:{icon:"copy"}}),e._v(" ")],1),n("span",{on:{click:function(t){return t.stopPropagation(),e.downloadMyElement(t)}}},[e._v(" "),n("font-awesome-icon",{attrs:{icon:"download"}}),e._v(" ")],1),n("span",{on:{click:function(t){return t.stopPropagation(),e.deleteMyElement(t)}}},[e._v(" "),n("font-awesome-icon",{attrs:{icon:"trash"}}),e._v(" ")],1)]):e._e()},mn=[],vn={name:"edit-bar-icons",props:{contentId:String,element:Object},mixins:[ye["a"],pt],data:function(){return{sane:!0}},computed:{useCrowdhound:function(){return"undefined"!=typeof this.contentId}},methods:{},created:function(){if(!this.$content)return console.error("ContentLayoutEditor.created(): this.$content not defined: has ContentService been initialised?"),void(this.sane=!1)}},fn=vn,hn=(n("620d"),H(fn,pn,mn,!1,null,"29a7180a",null));hn.options.__file="EditBarIcons.vue";var yn=hn.exports,gn={name:"content-field",components:{EditBarIcons:yn},props:{element:Object,context:{type:Object,required:!0}},mixins:[ye["a"],pt],computed:dn({},un("label"),un("placeholder"),un("help"))},bn=gn,Cn=(n("792c"),H(bn,en,tn,!1,null,"62052e76",null));Cn.options.__file="ContentField.vue";var En=Cn.exports,_n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[e._v("Field")]),n("transition",{attrs:{name:"c-property-list-transition"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isExpandedElement,expression:"isExpandedElement"}],staticClass:"c-element-properties"},[n("string-property",{attrs:{element:e.element,property:"label",label:"Label"}}),n("string-property",{attrs:{element:e.element,property:"placeholder",label:"Placeholder"}}),n("string-property",{attrs:{element:e.element,property:"help",label:"Help message"}})],1)])],1)},xn=[],wn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v(e._s(e.label))]),n("div",{staticClass:"c-property-value"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"input tt-string-input",domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})])])},$n=[],Sn={name:"stringProperty",props:{label:String,element:Object,property:String},computed:{value:{get:function(){return this.element[this.property]},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:this.property,value:e})}}}},Mn=Sn,In=(n("1da5"),H(Mn,wn,$n,!1,null,"8eae555e",null));In.options.__file="StringProperty.vue";var kn=In.exports,Tn={name:"content-field-props",mixins:[lt],components:{StringProperty:kn},props:{element:Object}},Pn=Tn,jn=(n("d2c0"),H(Pn,_n,xn,!1,null,"3b598794",null));jn.options.__file="ContentFieldProps.vue";var Ln=jn.exports,Dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-form",class:e.editModeClass},[e.isDesignMode?n("div",{on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("div",{staticClass:"c-layout-mode-heading"},[n("edit-bar-icons",{attrs:{element:e.element}}),e._v("form")],1),n("content-children",{staticClass:"my-content",attrs:{element:e.element,context:e.context}})],1):e.isEditMode?n("div",{on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("content-children",{attrs:{element:e.element,context:e.context}})],1):n("form",{staticClass:"form"},[n("content-children",{attrs:{element:e.element,context:e.context}})],1)])},An=[],On={name:"content-form",props:{element:Object,context:{type:Object,required:!0}},mixins:[ye["a"],pt],data:function(){return{}},computed:{}},Nn=On,qn=(n("c31d"),H(Nn,Dn,An,!1,null,"02db0bb1",null));qn.options.__file="ContentForm.vue";var Fn=qn.exports,zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[e._v("Form")]),n("transition",{attrs:{name:"c-property-list-transition"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isExpandedElement,expression:"isExpandedElement"}],staticClass:"c-element-properties"},[n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("ID")]),n("div",{staticClass:"c-property-value"},[e._v(e._s(e.element.id))])])])])],1)},Bn=[],Rn={name:"content-form-props",mixins:[lt],props:{element:Object}},Hn=Rn,Vn=(n("506b"),H(Hn,zn,Bn,!1,null,"2f9e558d",null));Vn.options.__file="ContentFormProps.vue";var Un=Vn.exports,Jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-section",class:["debug"==e.pageEditMode?"my-outline":""]},["debug"===e.pageEditMode?[n("div",{staticClass:"c-layout-mode-heading"},[n("edit-bar-icons",{attrs:{element:e.element}}),e._v("section")],1),n("div",{staticClass:"section section"},[n("content-children",{staticClass:"my-content",attrs:{element:e.element,context:e.context}})],1)]:"edit"===e.pageEditMode?n("div",{staticClass:"section section",on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("content-children",{attrs:{element:e.element,context:e.context}})],1):n("div",{staticClass:"section section"},[n("content-children",{attrs:{element:e.element,context:e.context}})],1)],2)},Wn=[],Kn={name:"content-section",components:{EditBarIcons:yn},props:{element:Object,context:{type:Object,required:!0}},mixins:[ye["a"],pt],computed:{}},Yn=Kn,Gn=(n("0407"),H(Yn,Jn,Wn,!1,null,"93104fcc",null));Gn.options.__file="ContentSection.vue";var Xn=Gn.exports,Zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[e._v("Section")]),n("transition",{attrs:{name:"c-property-list-transition"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isExpandedElement,expression:"isExpandedElement"}],staticClass:"c-element-properties"})])],1)},Qn=[],eo={name:"content-section-props",mixins:[lt],props:{element:Object}},to=eo,no=H(to,Zn,Qn,!1,null,null,null);no.options.__file="ContentSectionProps.vue";var oo=no.exports,so=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-content-container",class:e.editModeClass},["edit"===e.pageEditMode?n("div",{staticClass:"container",on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("content-children",{attrs:{element:e.element,context:e.context}})],1):"debug"===e.pageEditMode?n("div",{on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("div",{staticClass:"c-layout-mode-heading"},[n("edit-bar-icons",{attrs:{element:e.element}}),e._v("container")],1),n("div",{staticClass:"container"},[n("content-children",{staticClass:"my-content",attrs:{element:e.element,context:e.context}})],1)]):n("div",{staticClass:"container"},[n("content-children",{attrs:{element:e.element,context:e.context}})],1)])},io=[],ro={name:"content-container",components:{EditBarIcons:yn},props:{element:Object,context:{type:Object,required:!0}},mixins:[ye["a"],pt],computed:{sectionStyle:function(){var e={};return copyStyle(this.element,e,"background-color"),copyStyle(this.element,e,"padding"),copyStyle(this.element,e,"padding-top"),copyStyle(this.element,e,"padding-bottom"),copyStyle(this.element,e,"padding-left"),copyStyle(this.element,e,"padding-right"),e}}},ao=ro,co=(n("180b"),n("2153"),H(ao,so,io,!1,null,"0718f2e8",null));co.options.__file="ContentContainer.vue";var lo=co.exports,uo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[e._v("Container")]),n("transition",{attrs:{name:"c-property-list-transition"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isExpandedElement,expression:"isExpandedElement"}],staticClass:"c-element-properties"},[n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("Type")]),n("div",{staticClass:"c-property-value"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.protectedIsFluid,expression:"protectedIsFluid"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.protectedIsFluid=t.target.multiple?n:n[0]}}},[n("option",[e._v("navbar")]),n("option",[e._v("hero")]),n("option",[e._v("section")]),n("option",[e._v("footer")])])])]),n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"}),n("div",{staticClass:"c-property-value"},[n("label",{staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.protectedIsFluid,expression:"protectedIsFluid"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.protectedIsFluid)?e._i(e.protectedIsFluid,null)>-1:e.protectedIsFluid},on:{change:function(t){var n=e.protectedIsFluid,o=t.target,s=!!o.checked;if(Array.isArray(n)){var i=null,r=e._i(n,i);o.checked?r<0&&(e.protectedIsFluid=n.concat([i])):r>-1&&(e.protectedIsFluid=n.slice(0,r).concat(n.slice(r+1)))}else e.protectedIsFluid=s}}}),e._v(" full width")])])]),n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("Background")]),n("div",{staticClass:"c-property-value"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.protectedBgColor,expression:"protectedBgColor"}],staticClass:"input",domProps:{value:e.protectedBgColor},on:{input:function(t){t.target.composing||(e.protectedBgColor=t.target.value)}}})])])])])],1)},po=[],mo={name:"content-container-props",mixins:[lt],props:{element:{type:Object,required:!0}},computed:{protectedMode:{get:function(){var e=this.element["mode"];return e||"-"},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:"mode",value:e})}},protectedIsFluid:{get:function(){var e=this.element["is-fluid"];return e||"-"},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:"is-fluid",value:e})}},protectedBgColor:{get:function(){var e=this.element["background-color"];return e||"-"},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:"background-color",value:e})}}}},vo=mo,fo=(n("fc74"),n("8cd0"),H(vo,uo,po,!1,null,"1131288b",null));fo.options.__file="ContentContainerProps.vue";var ho=fo.exports,yo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-content-container",class:e.editModeClass},["edit"===e.pageEditMode?n("div",{staticClass:"container",on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("content-children",{attrs:{element:e.element,context:e.context}})],1):"debug"===e.pageEditMode?n("div",{on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("div",{staticClass:"c-layout-mode-heading"},[n("edit-bar-icons",{attrs:{element:e.element}}),e._v("container")],1),n("div",{staticClass:"container"},[n("content-children",{staticClass:"my-content",attrs:{element:e.element,context:e.context}})],1)]):n("div",{staticClass:"container"},[n("content-children",{attrs:{element:e.element,context:e.context}})],1)])},go=[],bo={name:"content-fixed-position-container",components:{EditBarIcons:yn},props:{element:Object,context:{type:Object,required:!0}},mixins:[ye["a"],pt],computed:{sectionStyle:function(){var e={};return copyStyle(this.element,e,"background-color"),copyStyle(this.element,e,"padding"),copyStyle(this.element,e,"padding-top"),copyStyle(this.element,e,"padding-bottom"),copyStyle(this.element,e,"padding-left"),copyStyle(this.element,e,"padding-right"),e}}},Co=bo,Eo=(n("33a4"),n("07af"),H(Co,yo,go,!1,null,"e4932dc4",null));Eo.options.__file="ContentFixedPositionContainer.vue";var _o=Eo.exports,xo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[e._v("Container")]),n("transition",{attrs:{name:"c-property-list-transition"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isExpandedElement,expression:"isExpandedElement"}],staticClass:"c-element-properties"},[n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("Type")]),n("div",{staticClass:"c-property-value"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.protectedIsFluid,expression:"protectedIsFluid"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.protectedIsFluid=t.target.multiple?n:n[0]}}},[n("option",[e._v("navbar")]),n("option",[e._v("hero")]),n("option",[e._v("section")]),n("option",[e._v("footer")])])])]),n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"}),n("div",{staticClass:"c-property-value"},[n("label",{staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.protectedIsFluid,expression:"protectedIsFluid"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.protectedIsFluid)?e._i(e.protectedIsFluid,null)>-1:e.protectedIsFluid},on:{change:function(t){var n=e.protectedIsFluid,o=t.target,s=!!o.checked;if(Array.isArray(n)){var i=null,r=e._i(n,i);o.checked?r<0&&(e.protectedIsFluid=n.concat([i])):r>-1&&(e.protectedIsFluid=n.slice(0,r).concat(n.slice(r+1)))}else e.protectedIsFluid=s}}}),e._v(" full width")])])]),n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("Background")]),n("div",{staticClass:"c-property-value"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.protectedBgColor,expression:"protectedBgColor"}],staticClass:"input",domProps:{value:e.protectedBgColor},on:{input:function(t){t.target.composing||(e.protectedBgColor=t.target.value)}}})])])])])],1)},wo=[],$o={name:"content-fixed-position-container-props",mixins:[lt],props:{element:Object},computed:{protectedMode:{get:function(){var e=this.element["mode"];return e||"-"},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:"mode",value:e})}},protectedIsFluid:{get:function(){var e=this.element["is-fluid"];return e||"-"},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:"is-fluid",value:e})}},protectedBgColor:{get:function(){var e=this.element["background-color"];return e||"-"},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:"background-color",value:e})}}}},So=$o,Mo=(n("73f4"),H(So,xo,wo,!1,null,"5741844e",null));Mo.options.__file="ContentFixedPositionContainerProps.vue";var Io=Mo.exports,ko=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-content-columns",class:e.editModeClass},[e.isDesignMode?[n("div",{staticClass:"c-layout-mode-heading"},[n("edit-bar-icons",{attrs:{element:e.element}}),e._v("columns")],1)]:e._e(),n("div",{staticClass:"columns"},e._l(e.element.children,function(t){return n("div",{staticClass:"column"},[n("content-children",{attrs:{element:t,context:e.context}})],1)}),0)],2)},To=[],Po={name:"content-columns",components:{EditBarIcons:yn},props:{element:Object,context:{type:Object,required:!0}},mixins:[ye["a"],pt]},jo=Po,Lo=(n("3fdb"),H(jo,ko,To,!1,null,"5190e1ec",null));Lo.options.__file="ContentColumns.vue";var Do=Lo.exports,Ao=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[e._v("Columns")]),n("transition",{attrs:{name:"c-property-list-transition"}},[e.isExpandedElement?n("div",{staticClass:"c-element-properties"},[n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("Columns")]),n("div",{staticClass:"c-property-value"},[n("div",{staticClass:"column c-property-value"},[e._v(e._s(e.element.children.length))])])])]):e._e()])],1)},Oo=[],No={name:"content-columns-props",mixins:[lt],props:{element:Object}},qo=No,Fo=H(qo,Ao,Oo,!1,null,null,null);Fo.options.__file="ContentColumnsProps.vue";var zo=Fo.exports,Bo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[n("div",{staticClass:"my-button"}),e._v("Card"),n("transition",{attrs:{name:"c-property-list-transition"}}),e.isExpandedElement?n("div",{staticClass:"c-element-properties"},[n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("doc ID")]),n("div",{staticClass:"c-property-value"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.docID,expression:"docID"}],staticClass:"input",domProps:{value:e.docID},on:{input:function(t){t.target.composing||(e.docID=t.target.value)}}})])])]):e._e()],1)])},Ro=[],Ho={name:"content-card-props",mixins:[lt],computed:{docID:{get:function(){var e=this.element["docID"];return e||""},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:"docID",value:e})}}}},Vo=Ho,Uo=(n("c1de"),H(Vo,Bo,Ro,!1,null,"0dcad99e",null));Uo.options.__file="ContentCardProps.vue";var Jo=Uo.exports,Wo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-youtube",class:[e.editModeClass,"debug"==e.pageEditMode?"tt-container-outline":""]},["view"===e.pageEditMode?n("div",{staticClass:"container"},[n("div",{staticClass:"youtube-container"},[n("iframe",{attrs:{width:"560",height:"315",src:e.src,frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""}})])]):"debug"===e.pageEditMode?n("div",{on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("div",{staticClass:"c-layout-mode-heading"},[n("edit-bar-icons",{attrs:{element:e.element}}),e._v("youtube")],1),e._m(0)]):n("div",{staticClass:"container",on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("div",{staticClass:"youtube-container my-dummy-iframe"})])])},Ko=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"youtube-container my-dummy-iframe"})])}],Yo={name:"content-youtube",components:{EditBarIcons:yn},props:{element:Object},mixins:[ye["a"],pt],data:function(){return{url:"https://www.youtube.com/embed/NFJu0rnAAm8",url2:"https://www.youtube.com/embed/q1muKgsPWE8"}},computed:{src:function(){var e="https://www.youtube.com/embed/".concat(this.element.docID);return console.log("url=".concat(e)),e}}},Go=Yo,Xo=(n("1409"),H(Go,Wo,Ko,!1,null,"06baf9c0",null));Xo.options.__file="ContentYoutube.vue";var Zo=Xo.exports,Qo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[e._v("Youtube Video")]),n("transition",{attrs:{name:"c-property-list-transition"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isExpandedElement,expression:"isExpandedElement"}],staticClass:"c-element-properties"},[n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("Video ID")]),n("div",{staticClass:"c-property-value"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.docID,expression:"docID"}],staticClass:"input",domProps:{value:e.docID},on:{input:function(t){t.target.composing||(e.docID=t.target.value)}}})])])])])],1)},es=[],ts={name:"content-youtube-props",mixins:[lt],computed:{docID:{get:function(){var e=this.element["docID"];return e||""},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:"docID",value:e})}}}},ns=ts,os=(n("3801"),H(ns,Qo,es,!1,null,"39386438",null));os.options.__file="ContentYoutubeProps.vue";var ss=os.exports,is=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-vimeo",class:[e.editModeClass,"debug"==e.pageEditMode?"tt-container-outline":""]},["view"===e.pageEditMode?n("div",{staticClass:"container"},[n("div",{staticClass:"vimeo-container"},[n("iframe",{attrs:{src:e.src,frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""}})])]):"debug"===e.pageEditMode?n("div",{on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("div",{staticClass:"c-layout-mode-heading"},[n("edit-bar-icons",{attrs:{element:e.element}}),e._v("vimeo")],1),e._m(0)]):n("div",{staticClass:"container",on:{click:function(t){return t.stopPropagation(),e.selectThisElement(t)}}},[n("div",{staticClass:"vimeo-container my-dummy-iframe"})])])},rs=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"vimeo-container my-dummy-iframe"})])}],as={name:"content-vimeo",components:{EditBarIcons:yn},props:{element:Object},mixins:[ye["a"],pt],data:function(){return{}},computed:{src:function(){var e="https://player.vimeo.com/video/".concat(this.element.docID);return console.log("url=".concat(e)),e}}},cs=as,ls=(n("7578"),H(cs,is,rs,!1,null,"22bbfa14",null));ls.options.__file="ContentVimeo.vue";var ds=ls.exports,us=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-property-element",class:e.propertyClass},[n("div",{staticClass:"tt-property-header",on:{click:e.setExpandedElement}},[n("div",{staticClass:"my-button"}),e._v("Vimeo Video")]),n("transition",{attrs:{name:"c-property-list-transition"}},[e.isExpandedElement?n("div",{staticClass:"c-element-properties"},[n("div",{staticClass:"tt-property"},[n("div",{staticClass:"c-property-label"},[e._v("Video ID")]),n("div",{staticClass:"c-property-value"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.docID,expression:"docID"}],staticClass:"input",domProps:{value:e.docID},on:{input:function(t){t.target.composing||(e.docID=t.target.value)}}})])])]):e._e()])],1)},ps=[],ms={name:"content-vimeo-props",mixins:[lt],computed:{docID:{get:function(){var e=this.element["docID"];return e||""},set:function(e){this.$content.setProperty({vm:this,element:this.element,name:"docID",value:e})}}}},vs=ms,fs=(n("c513"),H(vs,us,ps,!1,null,"a2436d4c",null));fs.options.__file="ContentVimeoProps.vue";var hs=fs.exports,ys=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sane?n("div",[n("content-admin-blog-list-element",{attrs:{element:e.element,level:0,tenant:e.tenant,"path-for-details":"/app-settings/{TENANT}/blog/{BLOGID}"}})],1):e._e()},gs=[],bs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sane?n("div",{staticClass:"crowdhound-comment"},[e.element?n("div",{staticClass:"surround"},[n("div",{directives:[{name:"show",rawName:"v-show",value:"loaded"==e.selectStatus,expression:"selectStatus == 'loaded'"}],staticClass:"list"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-2 is-offset-10"},[n("div",{staticClass:"field"},[n("div",{staticClass:"control has-icons-right"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.filterKey,expression:"filterKey"}],staticClass:"input is-small is-rounded",attrs:{type:"text",placeholder:"filter blogs",autocomplete:"off"},domProps:{value:e.filterKey},on:{input:function(t){t.target.composing||(e.filterKey=t.target.value)}}}),e._m(0)])])])]),n("table",{staticClass:"table is-fullwidth is-bordered is-narrow",class:{"is-hoverable":"string"===typeof e.pathForDetails}},[n("thead",[n("tr",e._l(e.ourColumns,function(t){return n("th",{class:{active:e.sortKey==t},on:{click:function(n){e.sortBy(t)}}},[e._v(e._s(e._f("capitalize")(t))),n("span",{staticClass:"arrow",class:e.sortOrders[t]>0?"asc":"dsc"})])}),0)]),n("tbody",[n("tr",{on:{click:function(t){e.selectBlog({tenant:e.element.tenant,id:e.element.id})}}},[n("td",[n("span",[e._v(e._s(e.element.title))])]),n("td",[n("span",[e._v(e._s(e.element.summary))])]),n("td",[n("span",[e._v(e._s(e.element.description))])])])])])]),e._l(e.element.children,function(t){return n("div",[n("content-admin-blog-list-element",{attrs:{element:t,level:e.level+1}})],1)})],2):e._e()]):e._e()},Cs=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon is-small is-right"},[n("i",{staticClass:"fa fa-search"})])}],Es=(n("00dd"),{name:"content-admin-blog-list-element",props:{element:Object,level:Number,tenant:String,pathForDetails:String},data:function(){var e=this.columns;"undefined"===typeof this.columns&&(e=["title","summary","description"]);var t={};return e.forEach(function(e){t[e]=1}),{sortKey:"",sortOrders:t,filterKey:"",ourColumns:e,locallySelectedUsers:[],selectStatus:"loaded",sane:!0}},filters:{capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},methods:{selectBlog:function(e){if(console.log("Selected blog:",e),console.log(this.pathForDetails),console.log("pathForDetails:",E(this.pathForDetails)),this.pathForDetails){var t="{TENANT}",n="{BLOGID}",o=this.pathForDetails.includes(t),s=this.pathForDetails.includes(n);if(o&&s){var i=this.pathForDetails;i=i.replace(t,e.tenant),i=i.replace(n,e.id),this.$router.push({path:i})}else console.error("path-for-details must include ".concat(t," and ").concat(n,". e.g. /blog-details/{TENANT}/{BLOGID}"))}}},created:function(){if(!this.$content)return console.error("ContentLayoutEditor.created(): this.$content not defined: has ContentService been initialised?"),void(this.sane=!1)}}),_s=Es,xs=(n("47c4"),H(_s,bs,Cs,!1,null,"d3c49d02",null));xs.options.__file="ContentAdminBlogListElement.vue";var ws=xs.exports,$s={name:"content-admin-blog-list",components:{ContentAdminBlogListElement:ws},props:{anchor:String,contentId:String,tenant:String},data:function(){return{element:null,selectError:!1,sane:!0}},watch:{anchor:function(e,t){this.load()},contentId:function(e,t){this.load()}},methods:{load:function(){var e=this;if(this.$content.disabled)console.error("Contentservice disabled");else{var t={elementId:1e3,withChildren:!0};this.$content.select(this,"$example-thread").then(function(t){t.elements.length>0?e.element=t.elements[0]:e.element=null}).catch(function(n){var o="Error loading comments";handleError(e,o,t,n),e.selectError=!0})}}},created:function(){if(!this.$content)return console.error("ContentLayoutEditor.created(): this.$content not defined: has ContentService been initialised?"),void(this.sane=!1);this.load(),console.log(this)}},Ss=$s,Ms=(n("a79b"),H(Ss,ys,gs,!1,null,"5b5f31ee",null));Ms.options.__file="ContentAdminBlogList.vue";var Is=Ms.exports,ks=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sane?n("div",[e.selectError?n("div",[e._m(0)]):e.crowdhoundElement?n("div",[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-1"}),n("div",{staticClass:"column is-3 has-text-centered"},[n("div",{staticClass:"a3-logo",class:{"a3-faded":e.crowdhoundElement.deleted}},[n("i",{staticClass:"fas fa-edit"})]),n("div",{staticClass:"a3-switch"},[n("div",{staticClass:"level"},[n("b-switch",{attrs:{type:"is-success","true-value":"0","false-value":"1"},model:{value:e.crowdhoundElement.deleted,callback:function(t){e.$set(e.crowdhoundElement,"deleted",t)},expression:"crowdhoundElement.deleted"}}),n("span",[e._v(e._s(e.crowdhoundElement.deleted?"Inactive":"Active"))])],1)]),n("br"),n("br"),n("button",{staticClass:"button is-info",on:{click:e.rememberToSave}},[e._v("Save")])]),n("div",{staticClass:"column is-6"},[n("form",[n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v("Title")]),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.crowdhoundElement.summary,expression:"crowdhoundElement.summary"}],staticClass:"input",attrs:{type:"text",placeholder:"Title",autocomplete:"off"},domProps:{value:e.crowdhoundElement.summary},on:{input:function(t){t.target.composing||e.$set(e.crowdhoundElement,"summary",t.target.value)}}})])]),n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v("Description")]),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.crowdhoundElement.description,expression:"crowdhoundElement.description"}],staticClass:"input",attrs:{type:"text",placeholder:"Description",autocomplete:"off"},domProps:{value:e.crowdhoundElement.description},on:{input:function(t){t.target.composing||e.$set(e.crowdhoundElement,"description",t.target.value)}}})])])])])])]):e._e()]):e._e()},Ts=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"notification is-danger"},[n("p",[e._v("Error: We were unable to select the user details.")]),n("p",[e._v("This may mean that you do not have permission, or it could be a network or server error.")])])}],Ps="",js="waiting to save",Ls="saving",Ds="your changes have been saved",As="warning: your changes have not been saved",Os=2e3,Ns={name:"content-admin-blog-details",components:{},props:{contentId:String,element:Object},data:function(){return{crowdhoundElement:null,saveMsg:"",saveTimeout:null,selectError:!1,sane:!0}},mixins:[ye["a"]],computed:{extraDebug:function(){return!0},useCrowdhound:function(){return!0}},methods:{rememberToSave:function(){var e=this;console.log("save to Crowdhound (not yet)"),this.saveTimeout||(this.saveMsg=js,this.saveTimeout=setTimeout(function(){e.saveTimeout=null,e.saveMsg=Ls,e.saveToCrowdhound()},Os))},saveToCrowdhound:function(){var e=this;console.error("saveToCrowdhound"),this.saveMsg=Ds,this.$content.update(this,this.crowdhoundElement).then(function(t){setTimeout(function(){e.saveMsg===js&&(e.saveMsg=Ps)},1700),console.log("result of save:",t),console.log("result of save:",t.data)}).catch(function(t){console.log("Dirty rotten error: ",t),e.saveMsg=As,e.selectError=!0})}},created:function(){var e=this;if(!this.$content)return console.error("ContentLayoutEditor.created(): this.$content not defined: has ContentService been initialised?"),void(this.sane=!1);if(this.useCrowdhound){if(console.log("Selecting text from Crowdhound"),"undefined"===typeof this.$content)return void console.error("this.$content not defined. Remember to us Contentservice.use(Vue).");if(this.$content.disabled)return void console.error("Contentservice disabled");console.log("Here we are before select..."),this.$content.select(this,this.$route.params.blogId).then(function(t){t.elements.length>0?(console.log("result=",t),e.crowdhoundElement=t.elements[0]):e.crowdhoundElement={}}).catch(function(t){console.log("Dirty rotten error: ",t),e.selectError=!0})}else console.log("Using description from element in layout")}},qs=Ns,Fs=(n("2442"),H(qs,ks,Ts,!1,null,"2687d314",null));Fs.options.__file="ContentAdminBlogDetails.vue";var zs=Fs.exports,Bs=n("a745"),Rs=n.n(Bs);function Hs(e){if(Rs()(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var Vs=n("774e"),Us=n.n(Vs),Js=n("c8bb"),Ws=n.n(Js);function Ks(e){if(Ws()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return Us()(e)}function Ys(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Gs(e){return Hs(e)||Ks(e)||Ys()}n("b0e1");function Xs(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Zs="",Qs="waiting to save",ei="saving",ti="your changes have been saved",ni="warning: your changes have not been saved",oi=2e3,si=null,ii=function(){return{mode:"view",previousEditMode:"edit",extraDebug:!1,dragging:!1,contentId:null,crowdhoundElement:null,layout:null,pathToSelectedElement:[],expandedElement:null,selectError:"",saveMsg:Zs,showLeftPane:!0,showRightPane:!0,refreshCounter:1}},ri={propertyElement:function(e){if(e.pathToSelectedElement){var t=e.pathToSelectedElement.length,n=t>0?e.pathToSelectedElement[t-1]:null;return console.log("propertyElement=",n),n}return null},layoutAsJson:function(e){return di(e.layout,!1)},propertyElementAsJson:function(e){if(e.pathToSelectedElement&&e.pathToSelectedElement.length>0){var t=e.pathToSelectedElement[e.pathToSelectedElement-1];return di(t,!1)}return null}},ai={setContentAction:function(e,t){var n=e.commit,o=(e.state,t.vm),s=t.type,i=t.layout,r=t.contentId;console.log("In Action contentLayout/setContentAction(type=".concat(s,", layout=").concat(i?"yes":"no",", contentId=").concat(r,")")),i?n("setLayout",{vm:o,layout:i,crowdhoundElement:null,editable:!1}):r?ui(n,o,r):console.error("setContent should be passed either contentId or layout")},deleteElementAction:function(e,t){var n=e.commit,o=e.state,s=t.vm,i=t.element;console.log("Action contentLayout/deleteElementAction()",i),n("deleteElementMutation",{vm:s,element:i}),vi(n,o,s)},insertLayoutAction:function(e,t){var n,o,s=e.commit,i=e.state,r=t.vm,a=t.parent,c=t.position,l=t.layout;switch(console.log("Action contentLayout/insertLayoutAction() parent=",a),console.log("Action contentLayout/insertLayoutAction() position=",c),console.log("Action contentLayout/insertLayoutAction() layout=",l),console.log("state=",i),console.log("ok 1"),E(l)){case"string":console.log("ok 1a");try{n=JSON.parse(l),console.log("ok 1b")}catch(d){return console.log("ok 1c"),console.error("Error while pasting:",d),console.log("ok 1d"),fi(r,"Invalid paste object (not JSON).")}break;case"object":console.log("ok 1e"),n=l;break;default:return console.log("ok 1f",E(l)),fi(r,"Invalid paste object")}return console.log("ok 2"),console.log("data=",n),"contentservice.io"!==n.type?fi("Invalid paste object (not from contentservice.io)."):(console.log("ok 3"),"1.0"!==n.version?fi("Invalid paste object (unknown version ".concat(n.version,").")):"undefined"===typeof n.layout?fi("Invalid paste object (missing layout)."):(o=n.layout,console.log("ok 4"),console.log("Will insert ",o),console.log("Position is",c),s("insertLayoutMutation",{vm:r,parent:a,position:c,layout:o}),void vi(s,i,r)))},setPropertyAction:function(e,t){var n=e.commit,o=e.state,s=t.vm,i=t.element,r=t.name,a=t.value,c=t.save;console.log("action setPropertyAction(".concat(i,", ").concat(r,", ").concat(a,", save=").concat(c,")")),o.crowdhoundElement,n("updateElementPropertyMutation",{vm:s,element:i,name:r,value:a}),n("setSaveMsg",{msg:Qs}),"Boolean"!==typeof c||c?vi(n,o,s):console.error("NOT SAVING THIS TRANSITORY VALUE. WARP YIP WANZACKO!")}},ci={setLayout:function(e,t){var n=t.vm,o=t.layout,s=t.contentId,i=t.crowdhoundElement,r=t.editable;if(console.log("In Mutation contentLayout/setLayout()",o),!o)return console.error("Mutation contentLayout/setLayout requires 'layout' parameter"),e.layout=null,e.contentId=null,e.crowdhoundElement=null,void(e.editable=!1);e.layout=li(n,o),e.crowdhoundElement=i,i?(e.crowdhoundElement=i,e.contentId=s):(e.crowdhoundElement=null,e.contentId=null),e.editable=r||!1},setPropertyInElementMutation:function(e,t){var n=t.vm,o=t.element,s=t.name,i=t.value,r=hi(e,o.id);if(r){var a=r[r.length-1];n.$set(a,s,i)}else console.error("setPropertyInElementMutation: element not found in current layout")},setPropertyElementMutation:function(e,t){var n=t.element,o=hi(e,n.id);e.pathToSelectedElement=o||[],e.expandedElement=o?o[o.length-1]:null,o.forEach(function(e){console.log("  ".concat(e.type,": ").concat(e.id))})},setExpandedElementMutation:function(e,t){var n=t.element;console.log("In Mutation contentLayout/setExpandedElementMutation()",n);for(var o=0;o<e.pathToSelectedElement.length;o++)if(e.pathToSelectedElement[o].id===n.id)return void(e.expandedElement=n);console.error("setExpandedElementMutation: element not in pathToSelectedElement")},setEditMode:function(e,t){var n=t.mode,o=t.previousEditMode;e.mode=n,o&&(e.previousEditMode=o)},dragStart:function(e,t){Xs(t),e.dragging=!0},dragStop:function(e,t){Xs(t),e.dragging=!1},setSaveMsg:function(e,t){var n=t.msg;e.saveMsg=n},updateElementPropertyMutation:function(e,t){var n=t.vm,o=t.element,s=t.name,i=t.value;o||(console.log("Update property in currently selected property element"),o=e.expandedElement),n.$set(o,s,i)},insertLayoutMutation:function(e,t){var n=t.vm,o=t.parent,s=t.position,i=t.layout;console.log("In Mutation contentLayout/insertLayoutMutation()",o,s,i);var r=JSON.parse(di(i));if(pi(e,r),console.log("ok 5",r),li(n,r),"layout"===r.type)console.log("Inserting layout element. ".concat(r.children.length," items."));else if(console.log("Inserting non-layout element: ".concat(r.type," at position ").concat(s)),"last"===s||s<0)o.children.push(r),console.log("ok 6a");else{if(!(s<=o.children.length))return void alert("insertLayoutMutation: Internal error #2963 (invalid position)");o.children.splice(s,0,r),console.log("ok 6b")}var a=hi(e,r.id);e.pathToSelectedElement=a||[],e.expandedElement=a?a[a.length-1]:null,console.log("Path to new element=",a),a.forEach(function(e){console.log("  ".concat(e.type,": ").concat(e.id),e)})},deleteElementMutation:function(e,t){t.vm;var n=t.element;console.log("In Mutation contentLayout/deleteElementMutation(".concat(n.id," (").concat(n.type,"))"));var o=hi(e,n.id);if(o&&o.length>=2){var s=o[o.length-2];console.log("Parent is ".concat(s.id," (").concat(s.type,")"));for(var i=0;i<s.children.length;i++)if(s.children[i].id==n.id)return console.log("Found item to delete in position ".concat(i)),void s.children.splice(i,1)}},refreshMutation:function(e,t){Xs(t),console.log("In Mutation refreshMutation()",e.refreshCounter),e.refreshCounter++}};function li(e,t){t.id||e.$set(t,"id",Math.floor(1e10*Math.random())),t.children||e.$set(t,"children",[]);for(var n=0;n<t.children.length;){var o=t.children[n];o?(li(e,o),n++):t.children.splice(n,1)}return t}function di(e,t){var n=t?0:4,o=ut()(e,yi,n);return o}function ui(e,t,n,o){if(console.log("store.loadlayout(".concat(n,")")),"undefined"!==typeof t.$content)if(t.$content.disabled)console.error("Contentservice disabled");else{var s=!1;"undefined"===typeof o?s=!0:o&&(s=!0);var i=n.startsWith("$")?n.substring(1):n,r="$"+i,a="layout";console.error(">>> contentId is ".concat(n,".")),t.$content.select(this,r,a).then(function(o){if(o.elements.length<1)console.error("Selecting layout returned no element. How is this possible?");else{var a=o.elements[0],c=a.description,l=null;if(c===i);else try{l=JSON.parse(c)}catch(p){console.error("Broken JSON: ",p),console.log("json=".concat(c))}if(console.log(">>> layout=",l),null===l){console.error(">>> Creating default layout");var d=n;d.startsWith("$")&&(d=d.substring(1)),d.startsWith("page-")&&(d=d.substring(5));var u=d.split("-");d="",u.forEach(function(e,t){switch(t>0&&(d+=" "),e.toLowerCase()){case"the":case"to":case"by":case"of":case"&":case"and":case"for":case"with":d+=e;break;default:d+=e.substring(0,1).toUpperCase()+e.substring(1)}}),l={type:"layout",children:[{type:"section",children:[{type:"container",children:[{type:"froala",text:'<h1 style="text-align: center;"><span style="font-size: 48px;">'.concat(d,"</span></h1>"),id:2,children:[]}]}]}]}}li(t,l);e("setLayout",{vm:t,contentId:r,layout:l,crowdhoundElement:a,editable:s})}}).catch(function(e){console.log("Dirty rotten error: ",e),ii.selectError=!0})}else console.error("this.$content not defined. Remember to us Contentservice.use(Vue).")}function pi(e,t){console.log("replaceIdsAlreadyInLayout(element: ".concat(t.id,", elementType: ").concat(t.type,")"));var n=mi(e),o=function e(t){var o=t.id;while(n[t.id])t.id=Math.floor(1e10*Math.random()),console.log("  replacing id of element ".concat(o," (").concat(t.type,") -> ").concat(t.id));t.children&&t.children.forEach(function(t){return e(t)})};o(t)}function mi(e){var t=[],n=function e(n){t[n.id]=!0,n.children&&n.children.forEach(function(t){return e(t)})};return n(e.layout),t}function vi(e,t,n){console.log("save to Crowdhound (not yet)"),si||(e("setSaveMsg",{msg:Qs}),si=setTimeout(function(){si=null,e("setSaveMsg",{msg:ei});var o={tenant:t.crowdhoundElement.tenant,rootId:t.crowdhoundElement.rootId,parentId:t.crowdhoundElement.parentId,id:t.crowdhoundElement.id,description:di(t.layout,!0)};console.log("saveToCrowdhound() in Store",o),console.log("safeJson length is ".concat(di(t.layout,!0).length)),e("setSaveMsg",{msg:ti}),n.$content.update(n,o).then(function(n){setTimeout(function(){t.saveMsg===Qs&&e("setSaveMsg",{msg:Zs})},1700),console.log("result of save:",n),console.log("result of save:",n.data)}).catch(function(t){var n="Error saving html content";console.log(n,t),e("setSaveMsg",{msg:ni})})},oi))}function fi(e,t){return e&&e.$toast?e.$toast.open({message:"".concat(t),type:"is-danger"}):(console.error("Error: ".concat(t)),alert("Error ".concat(t))),!1}function hi(e,t){console.log("trackDownElementInLayout(state, requiredID:".concat(t,")"));var n=function e(n){if(n.id===t)return[n];if(n.children)for(var o=0;o<n.children.length;o++){var s=n.children[o],i=e(s);if(i)return[n].concat(Gs(i))}return null};return n(e.layout)}function yi(e,t){return t}var gi={namespaced:!0,state:ii,mutations:ci,getters:ri,actions:ai},bi=n("b0b2"),Ci=n("368f"),Ei=n("07a2"),_i=bi["library"],xi=null;function wi(e,t){if(console.log("Contentservice.install()",t),!xi){e,console.log("Getting our _content"),xi=new D(t),console.log("Have our _content",xi);e.mixin({beforeCreate:function(){this.$parent?this._contentRoot=this.$parent._contentRoot:(this._contentRoot=this,this._content=xi,e.util.defineReactive(this,"_content",this.$content))},destroyed:function(){}}),Object.defineProperty(e.prototype,"$content",{get:function(){return this._contentRoot._content}}),e.component("crowdhound-minimal",Y),e.component("content-layout-editor",ae),e.component("content-toolbox",ve),e.component("content-pane",_e),e.component("content-content",te),e.component("content-content-props",Ze),e.component("content-children",Je),e.component("content-admin-blog-list",Is),e.component("content-admin-blog-details",zs),e.component("edit-bar-icons",yn),xi.registerWidget(e,{name:"section",label:"Section",category:"",iconClass:"c-icon-section",dragtype:"component",componentName:"content-section",component:Xn,propertyComponent:oo,data:{type:"contentservice.io",version:"1.0",source:"toolbox",layout:{type:"section"}}}),xi.registerWidget(e,{name:"container",label:"Container",category:"",iconClass:"c-icon-container",iconClass5:"c-icon-container",dragtype:"component",componentName:"content-container",component:lo,propertyComponent:ho,data:{type:"contentservice.io",version:"1.0",source:"toolbox",layout:{type:"container"}}}),xi.registerWidget(e,{name:"columns",label:"Columns",category:"",iconClass:"c-icon-columns",dragtype:"component",componentName:"content-columns",component:Do,propertyComponent:zo,data:{type:"contentservice.io",version:"1.0",source:"toolbox",layout:{type:"columns",children:[{children:[]},{children:[]}]}}}),xi.registerWidget(e,{name:"text",label:"Text",category:"",iconClass:"c-icon-text",dragtype:"component",componentName:"content-text",component:It,propertyComponent:Dt,data:{type:"contentservice.io",version:"1.0",source:"toolbox",layout:{type:"froala",text:"Lorem ipsum dolor sit amet, purus metus congue morbi hac elit id."}}}),xi.registerWidget(e,{name:"youtube",label:"Youtube",category:"",iconClass:"c-icon-youtube",dragtype:"component",componentName:"content-youtube",component:Zo,propertyComponent:ss,data:{type:"contentservice.io",version:"1.0",source:"toolbox",layout:{type:"youtube"}}}),xi.registerWidget(e,{name:"vimeo",label:"Vimeo",category:"",iconClass:"c-icon-vimeo",dragtype:"component",componentName:"content-vimeo",component:ds,propertyComponent:hs,data:{type:"contentservice.io",version:"1.0",source:"toolbox",layout:{type:"vimeo"}}}),xi.registerLayoutType(e,"element","content-element",Ie,De),xi.registerLayoutType(e,"froala","content-froala",Wt,Qt),xi.registerLayoutType(e,"html","content-html",Wt,Qt),xi.registerLayoutType(e,"field","content-field",En,Ln),xi.registerLayoutType(e,"form","content-form",Fn,Un),xi.registerLayoutType(e,"fixed-position-container","content-fixed-position-container",_o,Io),xi.registerLayoutType(e,"layout","content-layout",st,ht),xi.registerLayoutType(e,"card","card",Jo,Jo),e.component("edit-bar-icons",yn),e.component("edit-properties-header",ze),e.use(a.a),e.use(l.a),_i.add(Ci["faCut"]),_i.add(Ci["faCopy"]),_i.add(Ci["faDownload"]),_i.add(Ci["faTrash"]),e.component("font-awesome-icon",Ei["FontAwesomeIcon"]),"undefined"!=typeof window&&(window.$=n("c5e1")),n("25ac"),n("b4f3"),n("0ee6"),e.use(u.a),e.use(m.a),e.use(f.a),e.use(i.a);var o=new i.a.Store(gi);return xi.store=o,xi}console.error("Vue.use(ContentService) has already been called.")}var $i={install:wi};Object.defineProperty($i,"_content",{get:function(){return xi}});var Si=$i;"undefined"!==typeof window&&window.Vue&&(window.ContentService=$i);t["default"]=Si},fc74:function(e,t,n){"use strict";var o=n("86f6"),s=n.n(o);s.a}})["default"]});
//# sourceMappingURL=vue-contentservice.umd.min.js.map